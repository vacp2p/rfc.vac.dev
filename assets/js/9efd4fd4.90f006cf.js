"use strict";(self.webpackChunklogos_docs_template=self.webpackChunklogos_docs_template||[]).push([[3131],{62451:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>o,contentTitle:()=>l,default:()=>m,frontMatter:()=>i,metadata:()=>p,toc:()=>s});var a=n(87462),r=(n(67294),n(3905));const i={title:"16/WAKU2-RPC",name:"Waku v2 RPC API",status:"deprecated",editor:"Hanno Cornelius &lt;hanno@status.im&gt;"},l=void 0,p={unversionedId:"deprecated/16/rpc",id:"deprecated/16/rpc",title:"16/WAKU2-RPC",description:"- Status: deprecated",source:"@site/waku/deprecated/16/rpc.md",sourceDirName:"deprecated/16",slug:"/deprecated/16/rpc",permalink:"/waku/deprecated/16/rpc",draft:!1,tags:[],version:"current",frontMatter:{title:"16/WAKU2-RPC",name:"Waku v2 RPC API",status:"deprecated",editor:"Hanno Cornelius &lt;hanno@status.im&gt;"},sidebar:"defaultSidebar",previous:{title:"5/WAKU0",permalink:"/waku/deprecated/5/waku0"},next:{title:"18/WAKU2-SWAP",permalink:"/waku/deprecated/18/swap"}},o={},s=[{value:"Introduction",id:"introduction",level:2},{value:"Wire Protocol",id:"wire-protocol",level:2},{value:"Transport",id:"transport",level:3},{value:"Fields",id:"fields",level:4},{value:"Types",id:"types",level:3},{value:"WakuMessage",id:"wakumessage",level:3},{value:"Method naming",id:"method-naming",level:2},{value:"Debug API",id:"debug-api",level:2},{value:"WakuInfo",id:"wakuinfo",level:3},{value:"Parameters",id:"parameters",level:4},{value:"Response",id:"response",level:4},{value:"<code>get_waku_v2_debug_v1_version</code>",id:"get_waku_v2_debug_v1_version",level:3},{value:"Relay API",id:"relay-api",level:2},{value:"Relay Private API",id:"relay-private-api",level:2},{value:"KeyPair",id:"keypair",level:3},{value:"<code>get_waku_v2_private_v1_symmetric_key</code>",id:"get_waku_v2_private_v1_symmetric_key",level:3},{value:"<code>get_waku_v2_private_v1_asymmetric_keypair</code>",id:"get_waku_v2_private_v1_asymmetric_keypair",level:3},{value:"<code>get_waku_v2_private_v1_symmetric_messages</code>",id:"get_waku_v2_private_v1_symmetric_messages",level:3},{value:"Store API",id:"store-api",level:2},{value:"StoreResponse",id:"storeresponse",level:3},{value:"PagingOptions",id:"pagingoptions",level:4},{value:"Index",id:"index",level:4},{value:"Filter API",id:"filter-api",level:2},{value:"ContentFilter",id:"contentfilter",level:3},{value:"<code>post_waku_v2_filter_v1_subscription</code>",id:"post_waku_v2_filter_v1_subscription",level:3},{value:"<code>get_waku_v2_filter_v1_messages</code>",id:"get_waku_v2_filter_v1_messages",level:3},{value:"Admin API",id:"admin-api",level:2},{value:"WakuPeer",id:"wakupeer",level:3},{value:"<code>get_waku_v2_admin_v1_peers</code>",id:"get_waku_v2_admin_v1_peers",level:3},{value:"<code>post_waku_v2_admin_v1_peers</code>",id:"post_waku_v2_admin_v1_peers",level:3},{value:"Example usage",id:"example-usage",level:2},{value:"<code>get_waku_v2_store_v1_messages</code>",id:"get_waku_v2_store_v1_messages",level:3},{value:"Request",id:"request",level:4},{value:"Copyright",id:"copyright",level:2},{value:"References",id:"references",level:2}],d={toc:s};function m(e){let{components:t,...n}=e;return(0,r.kt)("wrapper",(0,a.Z)({},d,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Status: deprecated"),(0,r.kt)("li",{parentName:"ul"},"Editor: Hanno Cornelius ","<",(0,r.kt)("a",{parentName:"li",href:"mailto:hanno@status.im"},"hanno@status.im"),">")),(0,r.kt)("h2",{id:"introduction"},"Introduction"),(0,r.kt)("p",null,"This specification describes the JSON-RPC API that Waku v2 nodes MAY adhere to.\nRefer to the ",(0,r.kt)("a",{parentName:"p",href:"../10/waku2"},"Waku v2 specification"),"\nfor more information on Waku v2."),(0,r.kt)("h2",{id:"wire-protocol"},"Wire Protocol"),(0,r.kt)("h3",{id:"transport"},"Transport"),(0,r.kt)("p",null,"Nodes SHOULD expose an accessible\n",(0,r.kt)("a",{parentName:"p",href:"https://www.jsonrpc.org/specification"},"JSON-RPC")," API.\nThe JSON-RPC version SHOULD be ",(0,r.kt)("inlineCode",{parentName:"p"},"2.0"),". Below is an example request:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "jsonrpc":"2.0",\n  "method":"get_waku_v2_debug_info",\n  "params":[],\n  "id":1\n}\n')),(0,r.kt)("h4",{id:"fields"},"Fields"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Field"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"jsonrpc")),(0,r.kt)("td",{parentName:"tr",align:null},"Contains the used JSON-RPC version (",(0,r.kt)("inlineCode",{parentName:"td"},"Default: 2.0"),")")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"method")),(0,r.kt)("td",{parentName:"tr",align:null},"Contains the JSON-RPC method that is being called")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"params")),(0,r.kt)("td",{parentName:"tr",align:null},"An array of parameters for the request")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"id")),(0,r.kt)("td",{parentName:"tr",align:null},"The request ID")))),(0,r.kt)("h3",{id:"types"},"Types"),(0,r.kt)("p",null,"In this specification, the primitive types ",(0,r.kt)("inlineCode",{parentName:"p"},"Boolean"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"String"),",\n",(0,r.kt)("inlineCode",{parentName:"p"},"Number")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"Null"),", as well as the structured types ",(0,r.kt)("inlineCode",{parentName:"p"},"Array")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"Object"),",\nare to be interpreted according to the ",(0,r.kt)("a",{parentName:"p",href:"https://www.jsonrpc.org/specification#conventions"},"JSON-RPC specification"),".\nIt also adopts the same capitalisation conventions."),(0,r.kt)("p",null,"The following structured types are defined for use throughout the document:"),(0,r.kt)("h3",{id:"wakumessage"},"WakuMessage"),(0,r.kt)("p",null,"Refer to ",(0,r.kt)("a",{parentName:"p",href:"../14/message"},(0,r.kt)("inlineCode",{parentName:"a"},"Waku Message")," specification")," for more information."),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"WakuMessage")," is an ",(0,r.kt)("inlineCode",{parentName:"p"},"Object")," containing the following fields:"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:"right"},"Field"),(0,r.kt)("th",{parentName:"tr",align:"center"},"Type"),(0,r.kt)("th",{parentName:"tr",align:"center"},"Inclusion"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"right"},(0,r.kt)("inlineCode",{parentName:"td"},"payload")),(0,r.kt)("td",{parentName:"tr",align:"center"},(0,r.kt)("inlineCode",{parentName:"td"},"String")),(0,r.kt)("td",{parentName:"tr",align:"center"},"mandatory"),(0,r.kt)("td",{parentName:"tr",align:null},"The message payload as a ",(0,r.kt)("a",{parentName:"td",href:"https://datatracker.ietf.org/doc/html/rfc4648"},"base64 (with padding)")," encoded data string")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"right"},(0,r.kt)("inlineCode",{parentName:"td"},"contentTopic")),(0,r.kt)("td",{parentName:"tr",align:"center"},(0,r.kt)("inlineCode",{parentName:"td"},"String")),(0,r.kt)("td",{parentName:"tr",align:"center"},"optional"),(0,r.kt)("td",{parentName:"tr",align:null},"Message content topic for optional content-based filtering")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"right"},(0,r.kt)("inlineCode",{parentName:"td"},"version")),(0,r.kt)("td",{parentName:"tr",align:"center"},(0,r.kt)("inlineCode",{parentName:"td"},"Number")),(0,r.kt)("td",{parentName:"tr",align:"center"},"optional"),(0,r.kt)("td",{parentName:"tr",align:null},"Message version. Used to indicate type of payload encryption. Default version is 0 (no payload encryption).")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"right"},(0,r.kt)("inlineCode",{parentName:"td"},"timestamp")),(0,r.kt)("td",{parentName:"tr",align:"center"},(0,r.kt)("inlineCode",{parentName:"td"},"Number")),(0,r.kt)("td",{parentName:"tr",align:"center"},"optional"),(0,r.kt)("td",{parentName:"tr",align:null},"The time at which the message is generated by its sender. This field holds the Unix epoch time in nanoseconds as a 64-bits integer value.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"right"},(0,r.kt)("inlineCode",{parentName:"td"},"ephemeral")),(0,r.kt)("td",{parentName:"tr",align:"center"},(0,r.kt)("inlineCode",{parentName:"td"},"Boolean")),(0,r.kt)("td",{parentName:"tr",align:"center"},"optional"),(0,r.kt)("td",{parentName:"tr",align:null},"This flag indicates the transient nature of the message. Indicates if the message is eligible to be stored by the ",(0,r.kt)("inlineCode",{parentName:"td"},"store")," protocol, ",(0,r.kt)("a",{parentName:"td",href:"../13/store"},"13/WAKU2-STORE"),".")))),(0,r.kt)("h2",{id:"method-naming"},"Method naming"),(0,r.kt)("p",null,"The JSON-RPC methods in this document are designed to be mappable to HTTP REST endpoints.\nMethod names follow the pattern ",(0,r.kt)("inlineCode",{parentName:"p"},"<method_type>_waku_<protocol_version>_<api>_<api_version>_<resource>")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"<method_type>"),":\nprefix of the HTTP method type that most closely matches the JSON-RPC function.\nSupported ",(0,r.kt)("inlineCode",{parentName:"li"},"method_type")," values are ",(0,r.kt)("inlineCode",{parentName:"li"},"get"),", ",(0,r.kt)("inlineCode",{parentName:"li"},"post"),", ",(0,r.kt)("inlineCode",{parentName:"li"},"put"),", ",(0,r.kt)("inlineCode",{parentName:"li"},"delete")," or ",(0,r.kt)("inlineCode",{parentName:"li"},"patch"),"."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"<protocol_version>"),": Waku version. Currently ",(0,r.kt)("strong",{parentName:"li"},"v2"),"."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"<api>"),": one of the listed APIs below, e.g. ",(0,r.kt)("inlineCode",{parentName:"li"},"store"),", ",(0,r.kt)("inlineCode",{parentName:"li"},"debug"),", or ",(0,r.kt)("inlineCode",{parentName:"li"},"relay"),"."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"<api_version>"),": API definition version. Currently ",(0,r.kt)("strong",{parentName:"li"},"v1")," for all APIs."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"<resource>"),": the resource or resource path being addressed")),(0,r.kt)("p",null,"The method ",(0,r.kt)("inlineCode",{parentName:"p"},"post_waku_v2_relay_v1_message"),", for example,\nwould map to the HTTP REST endpoint ",(0,r.kt)("inlineCode",{parentName:"p"},"POST /waku/v2/relay/v1/message"),"."),(0,r.kt)("h2",{id:"debug-api"},"Debug API"),(0,r.kt)("p",null,"Types"),(0,r.kt)("p",null,"The following structured types are defined for use on the Debug API:"),(0,r.kt)("h3",{id:"wakuinfo"},"WakuInfo"),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"WakuInfo")," is an ",(0,r.kt)("inlineCode",{parentName:"p"},"Object")," containing the following fields:"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:"right"},"Field"),(0,r.kt)("th",{parentName:"tr",align:"center"},"Type"),(0,r.kt)("th",{parentName:"tr",align:"center"},"Inclusion"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"right"},(0,r.kt)("inlineCode",{parentName:"td"},"listenAddresses")),(0,r.kt)("td",{parentName:"tr",align:"center"},(0,r.kt)("inlineCode",{parentName:"td"},"Array"),"[",(0,r.kt)("inlineCode",{parentName:"td"},"String"),"]"),(0,r.kt)("td",{parentName:"tr",align:"center"},"mandatory"),(0,r.kt)("td",{parentName:"tr",align:null},"Listening addresses of the node")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"right"},(0,r.kt)("inlineCode",{parentName:"td"},"enrUri")),(0,r.kt)("td",{parentName:"tr",align:"center"},(0,r.kt)("inlineCode",{parentName:"td"},"String")),(0,r.kt)("td",{parentName:"tr",align:"center"},"optional"),(0,r.kt)("td",{parentName:"tr",align:null},"ENR URI of the node")))),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"get_waku_v2_debug_v1_info")),(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},"get_waku_v2_debug_v1_info")," method retrieves information about a Waku v2 node"),(0,r.kt)("h4",{id:"parameters"},"Parameters"),(0,r.kt)("p",null,"none"),(0,r.kt)("h4",{id:"response"},"Response"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#wakuinfo"},(0,r.kt)("strong",{parentName:"a"},(0,r.kt)("inlineCode",{parentName:"strong"},"WakuInfo")))," - information about a Waku v2 node")),(0,r.kt)("h3",{id:"get_waku_v2_debug_v1_version"},(0,r.kt)("inlineCode",{parentName:"h3"},"get_waku_v2_debug_v1_version")),(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},"get_waku_v2_debug_v1_version")," method retrieves the version of a Waku v2 node\nas a string.\nThe version SHOULD follow ",(0,r.kt)("a",{parentName:"p",href:"https://semver.org/"},"semantic versioning"),".\nIn case the node's current build is based on a git commit between semantic versions,\nthe retrieved version string MAY contain the git commit hash alone or\nin combination with the latest semantic version."),(0,r.kt)("p",null,"Parameters"),(0,r.kt)("p",null,"none"),(0,r.kt)("p",null,"Response"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"strong"},"string"))," - represents the version of a Waku v2 node")),(0,r.kt)("h2",{id:"relay-api"},"Relay API"),(0,r.kt)("p",null,"Refer to the ",(0,r.kt)("a",{parentName:"p",href:"../11/relay"},"Waku Relay specification"),"\nfor more information on the relaying of messages."),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"post_waku_v2_relay_v1_message")),(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},"post_waku_v2_relay_v1_message")," method publishes a message to be relayed on a\n",(0,r.kt)("a",{parentName:"p",href:"https://github.com/libp2p/specs/blob/master/pubsub/README.md#the-topic-descriptor"},"PubSub ",(0,r.kt)("inlineCode",{parentName:"a"},"topic"))),(0,r.kt)("p",null,"Parameters"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:"right"},"Field"),(0,r.kt)("th",{parentName:"tr",align:"center"},"Type"),(0,r.kt)("th",{parentName:"tr",align:"center"},"Inclusion"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"right"},(0,r.kt)("inlineCode",{parentName:"td"},"topic")),(0,r.kt)("td",{parentName:"tr",align:"center"},(0,r.kt)("inlineCode",{parentName:"td"},"String")),(0,r.kt)("td",{parentName:"tr",align:"center"},"mandatory"),(0,r.kt)("td",{parentName:"tr",align:null},"The ",(0,r.kt)("a",{parentName:"td",href:"https://github.com/libp2p/specs/blob/master/pubsub/README.md#the-topic-descriptor"},"PubSub ",(0,r.kt)("inlineCode",{parentName:"a"},"topic"))," being published on")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"right"},(0,r.kt)("inlineCode",{parentName:"td"},"message")),(0,r.kt)("td",{parentName:"tr",align:"center"},(0,r.kt)("a",{parentName:"td",href:"#wakumessage"},(0,r.kt)("inlineCode",{parentName:"a"},"WakuMessage"))),(0,r.kt)("td",{parentName:"tr",align:"center"},"mandatory"),(0,r.kt)("td",{parentName:"tr",align:null},"The ",(0,r.kt)("inlineCode",{parentName:"td"},"message")," being relayed")))),(0,r.kt)("p",null,"Response"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"strong"},"Bool"))," -\n",(0,r.kt)("inlineCode",{parentName:"li"},"true")," on success or\nan ",(0,r.kt)("a",{parentName:"li",href:"https://www.jsonrpc.org/specification#error_object"},"error")," on failure.")),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"post_waku_v2_relay_v1_subscriptions")),(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},"post_waku_v2_relay_v1_subscriptions")," method subscribes a node to an array of\n",(0,r.kt)("a",{parentName:"p",href:"https://github.com/libp2p/specs/blob/master/pubsub/README.md#the-topic-descriptor"},"PubSub ",(0,r.kt)("inlineCode",{parentName:"a"},"topics")),"."),(0,r.kt)("p",null,"Parameters"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:"right"},"Field"),(0,r.kt)("th",{parentName:"tr",align:"center"},"Type"),(0,r.kt)("th",{parentName:"tr",align:"center"},"Inclusion"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"right"},(0,r.kt)("inlineCode",{parentName:"td"},"topics")),(0,r.kt)("td",{parentName:"tr",align:"center"},(0,r.kt)("inlineCode",{parentName:"td"},"Array"),"[",(0,r.kt)("inlineCode",{parentName:"td"},"String"),"]"),(0,r.kt)("td",{parentName:"tr",align:"center"},"mandatory"),(0,r.kt)("td",{parentName:"tr",align:null},"The ",(0,r.kt)("a",{parentName:"td",href:"https://github.com/libp2p/specs/blob/master/pubsub/README.md#the-topic-descriptor"},"PubSub ",(0,r.kt)("inlineCode",{parentName:"a"},"topics"))," being subscribed to")))),(0,r.kt)("p",null,"Response"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"strong"},"Bool"))," -\n",(0,r.kt)("inlineCode",{parentName:"li"},"true")," on success or\nan ",(0,r.kt)("a",{parentName:"li",href:"https://www.jsonrpc.org/specification#error_object"},"error")," on failure.")),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"delete_waku_v2_relay_v1_subscriptions")),(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},"delete_waku_v2_relay_v1_subscriptions")," method unsubscribes a node from an array\nof ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/libp2p/specs/blob/master/pubsub/README.md#the-topic-descriptor"},"PubSub ",(0,r.kt)("inlineCode",{parentName:"a"},"topics")),"."),(0,r.kt)("p",null,"Parameters"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:"right"},"Field"),(0,r.kt)("th",{parentName:"tr",align:"center"},"Type"),(0,r.kt)("th",{parentName:"tr",align:"center"},"Inclusion"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"right"},(0,r.kt)("inlineCode",{parentName:"td"},"topics")),(0,r.kt)("td",{parentName:"tr",align:"center"},(0,r.kt)("inlineCode",{parentName:"td"},"Array"),"[",(0,r.kt)("inlineCode",{parentName:"td"},"String"),"]"),(0,r.kt)("td",{parentName:"tr",align:"center"},"mandatory"),(0,r.kt)("td",{parentName:"tr",align:null},"The ",(0,r.kt)("a",{parentName:"td",href:"https://github.com/libp2p/specs/blob/master/pubsub/README.md#the-topic-descriptor"},"PubSub ",(0,r.kt)("inlineCode",{parentName:"a"},"topics"))," being unsubscribed from")))),(0,r.kt)("p",null,"Response"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"strong"},"Bool"))," -\n",(0,r.kt)("inlineCode",{parentName:"li"},"true")," on success or\nan ",(0,r.kt)("a",{parentName:"li",href:"https://www.jsonrpc.org/specification#error_object"},"error")," on failure.")),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"get_waku_v2_relay_v1_messages")),(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},"get_waku_v2_relay_v1_messages")," method returns a list of messages\nthat were received on a subscribed\n",(0,r.kt)("a",{parentName:"p",href:"https://github.com/libp2p/specs/blob/master/pubsub/README.md#the-topic-descriptor"},"PubSub ",(0,r.kt)("inlineCode",{parentName:"a"},"topic")),"\nafter the last time this method was called.\nThe server MUST respond with an ",(0,r.kt)("a",{parentName:"p",href:"https://www.jsonrpc.org/specification#error_object"},"error"),"\nif no subscription exists for the polled ",(0,r.kt)("inlineCode",{parentName:"p"},"topic"),".\nIf no message has yet been received on the polled ",(0,r.kt)("inlineCode",{parentName:"p"},"topic"),",\nthe server SHOULD return an empty list.\nThis method can be used to poll a ",(0,r.kt)("inlineCode",{parentName:"p"},"topic")," for new messages."),(0,r.kt)("p",null,"Parameters"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:"right"},"Field"),(0,r.kt)("th",{parentName:"tr",align:"center"},"Type"),(0,r.kt)("th",{parentName:"tr",align:"center"},"Inclusion"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"right"},(0,r.kt)("inlineCode",{parentName:"td"},"topic")),(0,r.kt)("td",{parentName:"tr",align:"center"},(0,r.kt)("inlineCode",{parentName:"td"},"String")),(0,r.kt)("td",{parentName:"tr",align:"center"},"mandatory"),(0,r.kt)("td",{parentName:"tr",align:null},"The ",(0,r.kt)("a",{parentName:"td",href:"https://github.com/libp2p/specs/blob/master/pubsub/README.md#the-topic-descriptor"},"PubSub ",(0,r.kt)("inlineCode",{parentName:"a"},"topic"))," to poll for the latest messages")))),(0,r.kt)("p",null,"Response"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"strong"},"Array"),"[",(0,r.kt)("a",{parentName:"strong",href:"#wakumessage"},(0,r.kt)("inlineCode",{parentName:"a"},"WakuMessage")),"]")," -\nthe latest ",(0,r.kt)("inlineCode",{parentName:"li"},"messages")," on the polled ",(0,r.kt)("inlineCode",{parentName:"li"},"topic")," or\nan ",(0,r.kt)("a",{parentName:"li",href:"https://www.jsonrpc.org/specification#error_object"},"error")," on failure.")),(0,r.kt)("h2",{id:"relay-private-api"},"Relay Private API"),(0,r.kt)("p",null,"The Private API provides functionality to encrypt/decrypt ",(0,r.kt)("inlineCode",{parentName:"p"},"WakuMessage")," payloads\nusing either symmetric or asymmetric cryptography.\nThis allows backwards compatibility with ",(0,r.kt)("a",{parentName:"p",href:"../../legacy/6/waku1"},"Waku v1 nodes"),".\nIt is the API client's responsibility to keep track of the keys\nused for encrypted communication.\nSince keys must be cached by the client and\nprovided to the node to encrypt/decrypt payloads,\na Private API SHOULD NOT be exposed on non-local or untrusted nodes."),(0,r.kt)("p",null,"Types"),(0,r.kt)("p",null,"The following structured types are defined for use on the Private API:"),(0,r.kt)("h3",{id:"keypair"},"KeyPair"),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"KeyPair")," is an ",(0,r.kt)("inlineCode",{parentName:"p"},"Object")," containing the following fields:"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:"right"},"Field"),(0,r.kt)("th",{parentName:"tr",align:"center"},"Type"),(0,r.kt)("th",{parentName:"tr",align:"center"},"Inclusion"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"right"},(0,r.kt)("inlineCode",{parentName:"td"},"privateKey")),(0,r.kt)("td",{parentName:"tr",align:"center"},(0,r.kt)("inlineCode",{parentName:"td"},"String")),(0,r.kt)("td",{parentName:"tr",align:"center"},"mandatory"),(0,r.kt)("td",{parentName:"tr",align:null},"Private key as hex encoded data string")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"right"},(0,r.kt)("inlineCode",{parentName:"td"},"publicKey")),(0,r.kt)("td",{parentName:"tr",align:"center"},(0,r.kt)("inlineCode",{parentName:"td"},"String")),(0,r.kt)("td",{parentName:"tr",align:"center"},"mandatory"),(0,r.kt)("td",{parentName:"tr",align:null},"Public key as hex encoded data string")))),(0,r.kt)("h3",{id:"get_waku_v2_private_v1_symmetric_key"},(0,r.kt)("inlineCode",{parentName:"h3"},"get_waku_v2_private_v1_symmetric_key")),(0,r.kt)("p",null,"Generates and returns a symmetric key that can be used for message encryption and\ndecryption."),(0,r.kt)("p",null,"Parameters"),(0,r.kt)("p",null,"none"),(0,r.kt)("p",null,"Response"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"strong"},"String"))," - A new symmetric key as hex encoded data string")),(0,r.kt)("h3",{id:"get_waku_v2_private_v1_asymmetric_keypair"},(0,r.kt)("inlineCode",{parentName:"h3"},"get_waku_v2_private_v1_asymmetric_keypair")),(0,r.kt)("p",null,"Generates and returns a public/private key pair\nthat can be used for asymmetric message encryption and decryption."),(0,r.kt)("p",null,"Parameters"),(0,r.kt)("p",null,"none"),(0,r.kt)("p",null,"Response"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},(0,r.kt)("a",{parentName:"strong",href:"#keypair"},(0,r.kt)("inlineCode",{parentName:"a"},"KeyPair")))," - A new public/private key pair as hex encoded data strings")),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"post_waku_v2_private_v1_symmetric_message")),(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},"post_waku_v2_private_v1_symmetric_message")," method publishes a message\nto be relayed on a ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/libp2p/specs/blob/master/pubsub/README.md#the-topic-descriptor"},"PubSub ",(0,r.kt)("inlineCode",{parentName:"a"},"topic")),"."),(0,r.kt)("p",null,"Before being relayed,\nthe message payload is encrypted using the supplied symmetric key.\nThe client MUST provide a symmetric key."),(0,r.kt)("p",null,"Parameters"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:"right"},"Field"),(0,r.kt)("th",{parentName:"tr",align:"center"},"Type"),(0,r.kt)("th",{parentName:"tr",align:"center"},"Inclusion"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"right"},(0,r.kt)("inlineCode",{parentName:"td"},"topic")),(0,r.kt)("td",{parentName:"tr",align:"center"},(0,r.kt)("inlineCode",{parentName:"td"},"String")),(0,r.kt)("td",{parentName:"tr",align:"center"},"mandatory"),(0,r.kt)("td",{parentName:"tr",align:null},"The ",(0,r.kt)("a",{parentName:"td",href:"https://github.com/libp2p/specs/blob/master/pubsub/README.md#the-topic-descriptor"},"PubSub ",(0,r.kt)("inlineCode",{parentName:"a"},"topic"))," being published on")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"right"},(0,r.kt)("inlineCode",{parentName:"td"},"message")),(0,r.kt)("td",{parentName:"tr",align:"center"},(0,r.kt)("a",{parentName:"td",href:"#wakumessage"},(0,r.kt)("inlineCode",{parentName:"a"},"WakuMessage"))),(0,r.kt)("td",{parentName:"tr",align:"center"},"mandatory"),(0,r.kt)("td",{parentName:"tr",align:null},"The (unencrypted) ",(0,r.kt)("inlineCode",{parentName:"td"},"message")," being relayed")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"right"},(0,r.kt)("inlineCode",{parentName:"td"},"symkey")),(0,r.kt)("td",{parentName:"tr",align:"center"},(0,r.kt)("inlineCode",{parentName:"td"},"String")),(0,r.kt)("td",{parentName:"tr",align:"center"},"mandatory"),(0,r.kt)("td",{parentName:"tr",align:null},"The hex encoded symmetric key to use for payload encryption. This field MUST be included if symmetric key cryptography is selected")))),(0,r.kt)("p",null,"Response"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"strong"},"Bool"))," -\n",(0,r.kt)("inlineCode",{parentName:"li"},"true")," on success or\nan ",(0,r.kt)("a",{parentName:"li",href:"https://www.jsonrpc.org/specification#error_object"},"error")," on failure.")),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"post_waku_v2_private_v1_asymmetric_message")),(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},"post_waku_v2_private_v1_asymmetric_message")," method publishes a message\nto be relayed on a ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/libp2p/specs/blob/master/pubsub/README.md#the-topic-descriptor"},"PubSub ",(0,r.kt)("inlineCode",{parentName:"a"},"topic")),"."),(0,r.kt)("p",null,"Before being relayed,\nthe message payload is encrypted using the supplied public key.\nThe client MUST provide a public key."),(0,r.kt)("p",null,"Parameters"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:"right"},"Field"),(0,r.kt)("th",{parentName:"tr",align:"center"},"Type"),(0,r.kt)("th",{parentName:"tr",align:"center"},"Inclusion"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"right"},(0,r.kt)("inlineCode",{parentName:"td"},"topic")),(0,r.kt)("td",{parentName:"tr",align:"center"},(0,r.kt)("inlineCode",{parentName:"td"},"String")),(0,r.kt)("td",{parentName:"tr",align:"center"},"mandatory"),(0,r.kt)("td",{parentName:"tr",align:null},"The ",(0,r.kt)("a",{parentName:"td",href:"https://github.com/libp2p/specs/blob/master/pubsub/README.md#the-topic-descriptor"},"PubSub ",(0,r.kt)("inlineCode",{parentName:"a"},"topic"))," being published on")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"right"},(0,r.kt)("inlineCode",{parentName:"td"},"message")),(0,r.kt)("td",{parentName:"tr",align:"center"},(0,r.kt)("a",{parentName:"td",href:"#wakumessage"},(0,r.kt)("inlineCode",{parentName:"a"},"WakuMessage"))),(0,r.kt)("td",{parentName:"tr",align:"center"},"mandatory"),(0,r.kt)("td",{parentName:"tr",align:null},"The (unencrypted) ",(0,r.kt)("inlineCode",{parentName:"td"},"message")," being relayed")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"right"},(0,r.kt)("inlineCode",{parentName:"td"},"publicKey")),(0,r.kt)("td",{parentName:"tr",align:"center"},(0,r.kt)("inlineCode",{parentName:"td"},"String")),(0,r.kt)("td",{parentName:"tr",align:"center"},"mandatory"),(0,r.kt)("td",{parentName:"tr",align:null},"The hex encoded public key to use for payload encryption. This field MUST be included if asymmetric key cryptography is selected")))),(0,r.kt)("p",null,"Response"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"strong"},"Bool"))," -\n",(0,r.kt)("inlineCode",{parentName:"li"},"true")," on success or\nan ",(0,r.kt)("a",{parentName:"li",href:"https://www.jsonrpc.org/specification#error_object"},"error")," on failure.")),(0,r.kt)("h3",{id:"get_waku_v2_private_v1_symmetric_messages"},(0,r.kt)("inlineCode",{parentName:"h3"},"get_waku_v2_private_v1_symmetric_messages")),(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},"get_waku_v2_private_v1_symmetric_messages")," method decrypts and\nreturns a list of messages that were received on a subscribed\n",(0,r.kt)("a",{parentName:"p",href:"https://github.com/libp2p/specs/blob/master/pubsub/README.md#the-topic-descriptor"},"PubSub ",(0,r.kt)("inlineCode",{parentName:"a"},"topic")),"\nafter the last time this method was called.\nThe server MUST respond with an ",(0,r.kt)("a",{parentName:"p",href:"https://www.jsonrpc.org/specification#error_object"},"error"),"\nif no subscription exists for the polled ",(0,r.kt)("inlineCode",{parentName:"p"},"topic"),".\nIf no message has yet been received on the polled ",(0,r.kt)("inlineCode",{parentName:"p"},"topic"),",\nthe server SHOULD return an empty list.\nThis method can be used to poll a ",(0,r.kt)("inlineCode",{parentName:"p"},"topic")," for new messages."),(0,r.kt)("p",null,"Before returning the messages,\nthe server decrypts the message payloads using the supplied symmetric key.\nThe client MUST provide a symmetric key."),(0,r.kt)("p",null,"Parameters"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:"right"},"Field"),(0,r.kt)("th",{parentName:"tr",align:"center"},"Type"),(0,r.kt)("th",{parentName:"tr",align:"center"},"Inclusion"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"right"},(0,r.kt)("inlineCode",{parentName:"td"},"topic")),(0,r.kt)("td",{parentName:"tr",align:"center"},(0,r.kt)("inlineCode",{parentName:"td"},"String")),(0,r.kt)("td",{parentName:"tr",align:"center"},"mandatory"),(0,r.kt)("td",{parentName:"tr",align:null},"The ",(0,r.kt)("a",{parentName:"td",href:"https://github.com/libp2p/specs/blob/master/pubsub/README.md#the-topic-descriptor"},"PubSub ",(0,r.kt)("inlineCode",{parentName:"a"},"topic"))," to poll for the latest messages")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"right"},(0,r.kt)("inlineCode",{parentName:"td"},"symkey")),(0,r.kt)("td",{parentName:"tr",align:"center"},(0,r.kt)("inlineCode",{parentName:"td"},"String")),(0,r.kt)("td",{parentName:"tr",align:"center"},"mandatory"),(0,r.kt)("td",{parentName:"tr",align:null},"The hex encoded symmetric key to use for payload decryption. This field MUST be included if symmetric key cryptography is selected")))),(0,r.kt)("p",null,"Response"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"strong"},"Array"),"[",(0,r.kt)("a",{parentName:"strong",href:"#wakumessage"},(0,r.kt)("inlineCode",{parentName:"a"},"WakuMessage")),"]")," -\nthe latest ",(0,r.kt)("inlineCode",{parentName:"li"},"messages")," on the polled ",(0,r.kt)("inlineCode",{parentName:"li"},"topic")," or\nan ",(0,r.kt)("a",{parentName:"li",href:"https://www.jsonrpc.org/specification#error_object"},"error")," on failure.")),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"get_waku_v2_private_v1_asymmetric_messages")),(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},"get_waku_v2_private_v1_asymmetric_messages")," method decrypts and\nreturns a list of messages that were received on a subscribed ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/libp2p/specs/blob/master/pubsub/README.md#the-topic-descriptor"},"PubSub ",(0,r.kt)("inlineCode",{parentName:"a"},"topic")),"\nafter the last time this method was called.\nThe server MUST respond with an ",(0,r.kt)("a",{parentName:"p",href:"https://www.jsonrpc.org/specification#error_object"},"error"),"\nif no subscription exists for the polled ",(0,r.kt)("inlineCode",{parentName:"p"},"topic"),".\nIf no message has yet been received on the polled ",(0,r.kt)("inlineCode",{parentName:"p"},"topic"),",\nthe server SHOULD return an empty list.\nThis method can be used to poll a ",(0,r.kt)("inlineCode",{parentName:"p"},"topic")," for new messages."),(0,r.kt)("p",null,"Before returning the messages,\nthe server decrypts the message payloads using the supplied private key.\nThe client MUST provide a private key."),(0,r.kt)("p",null,"Parameters"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:"right"},"Field"),(0,r.kt)("th",{parentName:"tr",align:"center"},"Type"),(0,r.kt)("th",{parentName:"tr",align:"center"},"Inclusion"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"right"},(0,r.kt)("inlineCode",{parentName:"td"},"topic")),(0,r.kt)("td",{parentName:"tr",align:"center"},(0,r.kt)("inlineCode",{parentName:"td"},"String")),(0,r.kt)("td",{parentName:"tr",align:"center"},"mandatory"),(0,r.kt)("td",{parentName:"tr",align:null},"The ",(0,r.kt)("a",{parentName:"td",href:"https://github.com/libp2p/specs/blob/master/pubsub/README.md#the-topic-descriptor"},"PubSub ",(0,r.kt)("inlineCode",{parentName:"a"},"topic"))," to poll for the latest messages")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"right"},(0,r.kt)("inlineCode",{parentName:"td"},"privateKey")),(0,r.kt)("td",{parentName:"tr",align:"center"},(0,r.kt)("inlineCode",{parentName:"td"},"String")),(0,r.kt)("td",{parentName:"tr",align:"center"},"mandatory"),(0,r.kt)("td",{parentName:"tr",align:null},"The hex encoded private key to use for payload decryption. This field MUST be included if asymmetric key cryptography is selected")))),(0,r.kt)("p",null,"Response"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"strong"},"Array"),"[",(0,r.kt)("a",{parentName:"strong",href:"#wakumessage"},(0,r.kt)("inlineCode",{parentName:"a"},"WakuMessage")),"]")," -\nthe latest ",(0,r.kt)("inlineCode",{parentName:"li"},"messages")," on the polled ",(0,r.kt)("inlineCode",{parentName:"li"},"topic")," or\nan ",(0,r.kt)("a",{parentName:"li",href:"https://www.jsonrpc.org/specification#error_object"},"error")," on failure.")),(0,r.kt)("h2",{id:"store-api"},"Store API"),(0,r.kt)("p",null,"Refer to the ",(0,r.kt)("a",{parentName:"p",href:"../13/store"},"Waku Store specification"),"\nfor more information on message history retrieval."),(0,r.kt)("p",null,"The following structured types are defined for use on the Store API:"),(0,r.kt)("h3",{id:"storeresponse"},"StoreResponse"),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"StoreResponse")," is an ",(0,r.kt)("inlineCode",{parentName:"p"},"Object")," containing the following fields:"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:"right"},"Field"),(0,r.kt)("th",{parentName:"tr",align:"center"},"Type"),(0,r.kt)("th",{parentName:"tr",align:"center"},"Inclusion"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"right"},(0,r.kt)("inlineCode",{parentName:"td"},"messages")),(0,r.kt)("td",{parentName:"tr",align:"center"},(0,r.kt)("inlineCode",{parentName:"td"},"Array"),"[",(0,r.kt)("a",{parentName:"td",href:"#wakumessage"},(0,r.kt)("inlineCode",{parentName:"a"},"WakuMessage")),"]"),(0,r.kt)("td",{parentName:"tr",align:"center"},"mandatory"),(0,r.kt)("td",{parentName:"tr",align:null},"Array of retrieved historical messages")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"right"},(0,r.kt)("inlineCode",{parentName:"td"},"pagingOptions")),(0,r.kt)("td",{parentName:"tr",align:"center"},(0,r.kt)("a",{parentName:"td",href:"#pagingoptions"},(0,r.kt)("inlineCode",{parentName:"a"},"PagingOptions"))),(0,r.kt)("td",{parentName:"tr",align:"center"},(0,r.kt)("a",{parentName:"td",href:"#get_waku_v2_store_v1_messages"},"conditional")),(0,r.kt)("td",{parentName:"tr",align:null},"Paging information from which to resume further historical queries")))),(0,r.kt)("h4",{id:"pagingoptions"},"PagingOptions"),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"pagingOptions")," is an ",(0,r.kt)("inlineCode",{parentName:"p"},"Object")," containing the following fields:"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:"right"},"Field"),(0,r.kt)("th",{parentName:"tr",align:"center"},"Type"),(0,r.kt)("th",{parentName:"tr",align:"center"},"Inclusion"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"right"},(0,r.kt)("inlineCode",{parentName:"td"},"pageSize")),(0,r.kt)("td",{parentName:"tr",align:"center"},(0,r.kt)("inlineCode",{parentName:"td"},"Number")),(0,r.kt)("td",{parentName:"tr",align:"center"},"mandatory"),(0,r.kt)("td",{parentName:"tr",align:null},"Number of messages to retrieve per page")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"right"},(0,r.kt)("inlineCode",{parentName:"td"},"cursor")),(0,r.kt)("td",{parentName:"tr",align:"center"},(0,r.kt)("a",{parentName:"td",href:"#index"},(0,r.kt)("inlineCode",{parentName:"a"},"Index"))),(0,r.kt)("td",{parentName:"tr",align:"center"},"optional"),(0,r.kt)("td",{parentName:"tr",align:null},"Message ",(0,r.kt)("a",{parentName:"td",href:"#index"},(0,r.kt)("inlineCode",{parentName:"a"},"Index"))," from which to perform pagination. If not included and ",(0,r.kt)("inlineCode",{parentName:"td"},"forward")," is set to ",(0,r.kt)("inlineCode",{parentName:"td"},"true"),", paging will be performed from the beginning of the list. If not included and ",(0,r.kt)("inlineCode",{parentName:"td"},"forward")," is set to ",(0,r.kt)("inlineCode",{parentName:"td"},"false"),", paging will be performed from the end of the list.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"right"},(0,r.kt)("inlineCode",{parentName:"td"},"forward")),(0,r.kt)("td",{parentName:"tr",align:"center"},(0,r.kt)("inlineCode",{parentName:"td"},"Bool")),(0,r.kt)("td",{parentName:"tr",align:"center"},"mandatory"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"true")," if paging forward, ",(0,r.kt)("inlineCode",{parentName:"td"},"false")," if paging backward")))),(0,r.kt)("h4",{id:"index"},"Index"),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"Index")," is an ",(0,r.kt)("inlineCode",{parentName:"p"},"Object")," containing the following fields:"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:"right"},"Field"),(0,r.kt)("th",{parentName:"tr",align:"center"},"Type"),(0,r.kt)("th",{parentName:"tr",align:"center"},"Inclusion"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"right"},(0,r.kt)("inlineCode",{parentName:"td"},"digest")),(0,r.kt)("td",{parentName:"tr",align:"center"},(0,r.kt)("inlineCode",{parentName:"td"},"String")),(0,r.kt)("td",{parentName:"tr",align:"center"},"mandatory"),(0,r.kt)("td",{parentName:"tr",align:null},"A hash for the message at this ",(0,r.kt)("a",{parentName:"td",href:"#index"},(0,r.kt)("inlineCode",{parentName:"a"},"Index")))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"right"},(0,r.kt)("inlineCode",{parentName:"td"},"receivedTime")),(0,r.kt)("td",{parentName:"tr",align:"center"},(0,r.kt)("inlineCode",{parentName:"td"},"Number")),(0,r.kt)("td",{parentName:"tr",align:"center"},"mandatory"),(0,r.kt)("td",{parentName:"tr",align:null},"UNIX timestamp in nanoseconds at which the message at this ",(0,r.kt)("a",{parentName:"td",href:"#index"},(0,r.kt)("inlineCode",{parentName:"a"},"Index"))," was received")))),(0,r.kt)("p",null,"ContentFilter"),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"ContentFilter")," is an ",(0,r.kt)("inlineCode",{parentName:"p"},"Object")," containing the following fields:"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:"right"},"Field"),(0,r.kt)("th",{parentName:"tr",align:"center"},"Type"),(0,r.kt)("th",{parentName:"tr",align:"center"},"Inclusion"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"right"},(0,r.kt)("inlineCode",{parentName:"td"},"contentTopic")),(0,r.kt)("td",{parentName:"tr",align:"center"},(0,r.kt)("inlineCode",{parentName:"td"},"String")),(0,r.kt)("td",{parentName:"tr",align:"center"},"mandatory"),(0,r.kt)("td",{parentName:"tr",align:null},"The content topic of a ",(0,r.kt)("a",{parentName:"td",href:"#wakumessage"},(0,r.kt)("inlineCode",{parentName:"a"},"WakuMessage")))))),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"get_waku_v2_store_v1_messages")),(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},"get_waku_v2_store_v1_messages")," method retrieves historical messages\non specific content topics.\nThis method MAY be called with ",(0,r.kt)("a",{parentName:"p",href:"#pagingoptions"},(0,r.kt)("inlineCode",{parentName:"a"},"PagingOptions")),",\nto retrieve historical messages on a per-page basis.\nIf the request included ",(0,r.kt)("a",{parentName:"p",href:"#pagingoptions"},(0,r.kt)("inlineCode",{parentName:"a"},"PagingOptions")),",\nthe node MUST return messages on a per-page basis and\ninclude ",(0,r.kt)("a",{parentName:"p",href:"#pagingoptions"},(0,r.kt)("inlineCode",{parentName:"a"},"PagingOptions"))," in the response.\nThese ",(0,r.kt)("a",{parentName:"p",href:"#pagingoptions"},(0,r.kt)("inlineCode",{parentName:"a"},"PagingOptions"))," MUST contain a ",(0,r.kt)("inlineCode",{parentName:"p"},"cursor")," pointing\nto the ",(0,r.kt)("a",{parentName:"p",href:"#index"},(0,r.kt)("inlineCode",{parentName:"a"},"Index"))," from which a new page can be requested."),(0,r.kt)("p",null,"Parameters"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:"right"},"Field"),(0,r.kt)("th",{parentName:"tr",align:"center"},"Type"),(0,r.kt)("th",{parentName:"tr",align:"center"},"Inclusion"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"right"},(0,r.kt)("inlineCode",{parentName:"td"},"pubsubTopic")),(0,r.kt)("td",{parentName:"tr",align:"center"},(0,r.kt)("inlineCode",{parentName:"td"},"String")),(0,r.kt)("td",{parentName:"tr",align:"center"},"optional"),(0,r.kt)("td",{parentName:"tr",align:null},"The pubsub topic on which a  ",(0,r.kt)("a",{parentName:"td",href:"#wakumessage"},(0,r.kt)("inlineCode",{parentName:"a"},"WakuMessage"))," is published")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"right"},(0,r.kt)("inlineCode",{parentName:"td"},"contentFilters")),(0,r.kt)("td",{parentName:"tr",align:"center"},(0,r.kt)("inlineCode",{parentName:"td"},"Array"),"[",(0,r.kt)("a",{parentName:"td",href:"#contentfilter"},(0,r.kt)("inlineCode",{parentName:"a"},"ContentFilter")),"]"),(0,r.kt)("td",{parentName:"tr",align:"center"},"optional"),(0,r.kt)("td",{parentName:"tr",align:null},"Array of content filters to query for historical messages")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"right"},(0,r.kt)("inlineCode",{parentName:"td"},"startTime")),(0,r.kt)("td",{parentName:"tr",align:"center"},(0,r.kt)("inlineCode",{parentName:"td"},"Number")),(0,r.kt)("td",{parentName:"tr",align:"center"},"optional"),(0,r.kt)("td",{parentName:"tr",align:null},"The inclusive lower bound on the ",(0,r.kt)("a",{parentName:"td",href:"../14/message#message-attributes"},(0,r.kt)("inlineCode",{parentName:"a"},"timestamp"))," of queried ",(0,r.kt)("a",{parentName:"td",href:"#wakumessage"},(0,r.kt)("inlineCode",{parentName:"a"},"WakuMessage"),"s"),". This field holds the Unix epoch time in nanoseconds as a 64-bits integer value.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"right"},(0,r.kt)("inlineCode",{parentName:"td"},"endTime")),(0,r.kt)("td",{parentName:"tr",align:"center"},(0,r.kt)("inlineCode",{parentName:"td"},"Number")),(0,r.kt)("td",{parentName:"tr",align:"center"},"optional"),(0,r.kt)("td",{parentName:"tr",align:null},"The inclusive upper bound on the ",(0,r.kt)("a",{parentName:"td",href:"../14/message#message-attributes"},(0,r.kt)("inlineCode",{parentName:"a"},"timestamp"))," of queried ",(0,r.kt)("a",{parentName:"td",href:"#wakumessage"},(0,r.kt)("inlineCode",{parentName:"a"},"WakuMessage"),"s"),". This field holds the Unix epoch time in nanoseconds as a 64-bits integer value.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"right"},(0,r.kt)("inlineCode",{parentName:"td"},"pagingOptions")),(0,r.kt)("td",{parentName:"tr",align:"center"},(0,r.kt)("a",{parentName:"td",href:"#pagingoptions"},(0,r.kt)("inlineCode",{parentName:"a"},"PagingOptions"))),(0,r.kt)("td",{parentName:"tr",align:"center"},"optional"),(0,r.kt)("td",{parentName:"tr",align:null},"Pagination information")))),(0,r.kt)("p",null,"Response"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#storeresponse"},(0,r.kt)("strong",{parentName:"a"},(0,r.kt)("inlineCode",{parentName:"strong"},"StoreResponse")))," -\nthe response to a ",(0,r.kt)("inlineCode",{parentName:"li"},"query")," for historical messages.")),(0,r.kt)("h2",{id:"filter-api"},"Filter API"),(0,r.kt)("p",null,"Refer to the ",(0,r.kt)("a",{parentName:"p",href:"../12/filter"},"Waku Filter specification"),"\nfor more information on content filtering."),(0,r.kt)("p",null,"Types"),(0,r.kt)("p",null,"The following structured types are defined for use on the Filter API:"),(0,r.kt)("h3",{id:"contentfilter"},"ContentFilter"),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"ContentFilter")," is an ",(0,r.kt)("inlineCode",{parentName:"p"},"Object")," containing the following fields:"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:"right"},"Field"),(0,r.kt)("th",{parentName:"tr",align:"center"},"Type"),(0,r.kt)("th",{parentName:"tr",align:"center"},"Inclusion"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"right"},(0,r.kt)("inlineCode",{parentName:"td"},"contentTopic")),(0,r.kt)("td",{parentName:"tr",align:"center"},(0,r.kt)("inlineCode",{parentName:"td"},"String")),(0,r.kt)("td",{parentName:"tr",align:"center"},"mandatory"),(0,r.kt)("td",{parentName:"tr",align:null},"message content topic")))),(0,r.kt)("h3",{id:"post_waku_v2_filter_v1_subscription"},(0,r.kt)("inlineCode",{parentName:"h3"},"post_waku_v2_filter_v1_subscription")),(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},"post_waku_v2_filter_v1_subscription")," method creates a subscription in a\n",(0,r.kt)("a",{parentName:"p",href:"../12/filter#rationale"},"light node")," for messages that matches a content filter\nand, optionally, a ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/libp2p/specs/blob/master/pubsub/README.md#the-topic-descriptor"},"PubSub ",(0,r.kt)("inlineCode",{parentName:"a"},"topic")),"."),(0,r.kt)("p",null,"Parameters"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:"right"},"Field"),(0,r.kt)("th",{parentName:"tr",align:"center"},"Type"),(0,r.kt)("th",{parentName:"tr",align:"center"},"Inclusion"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"right"},(0,r.kt)("inlineCode",{parentName:"td"},"contentFilters")),(0,r.kt)("td",{parentName:"tr",align:"center"},(0,r.kt)("inlineCode",{parentName:"td"},"Array"),"[",(0,r.kt)("a",{parentName:"td",href:"#contentfilter"},(0,r.kt)("inlineCode",{parentName:"a"},"ContentFilter")),"]"),(0,r.kt)("td",{parentName:"tr",align:"center"},"mandatory"),(0,r.kt)("td",{parentName:"tr",align:null},"Array of content filters being subscribed to")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"right"},(0,r.kt)("inlineCode",{parentName:"td"},"topic")),(0,r.kt)("td",{parentName:"tr",align:"center"},(0,r.kt)("inlineCode",{parentName:"td"},"String")),(0,r.kt)("td",{parentName:"tr",align:"center"},"optional"),(0,r.kt)("td",{parentName:"tr",align:null},"Message topic")))),(0,r.kt)("p",null,"Response"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"strong"},"Bool"))," - ",(0,r.kt)("inlineCode",{parentName:"li"},"true")," on success or\nan ",(0,r.kt)("a",{parentName:"li",href:"https://www.jsonrpc.org/specification#error_object"},"error")," on failure.")),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"delete_waku_v2_filter_v1_subscription")),(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},"delete_waku_v2_filter_v1_subscription")," method removes subscriptions\nin a ",(0,r.kt)("a",{parentName:"p",href:"../12/filter#rationale"},"light node")," matching a content filter and,\noptionally, a ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/libp2p/specs/blob/master/pubsub/README.md#the-topic-descriptor"},"PubSub ",(0,r.kt)("inlineCode",{parentName:"a"},"topic")),"."),(0,r.kt)("p",null,"Parameters"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:"right"},"Field"),(0,r.kt)("th",{parentName:"tr",align:"center"},"Type"),(0,r.kt)("th",{parentName:"tr",align:"center"},"Inclusion"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"right"},(0,r.kt)("inlineCode",{parentName:"td"},"contentFilters")),(0,r.kt)("td",{parentName:"tr",align:"center"},(0,r.kt)("inlineCode",{parentName:"td"},"Array"),"[",(0,r.kt)("a",{parentName:"td",href:"#contentfilter"},(0,r.kt)("inlineCode",{parentName:"a"},"ContentFilter")),"]"),(0,r.kt)("td",{parentName:"tr",align:"center"},"mandatory"),(0,r.kt)("td",{parentName:"tr",align:null},"Array of content filters being unsubscribed from")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"right"},(0,r.kt)("inlineCode",{parentName:"td"},"topic")),(0,r.kt)("td",{parentName:"tr",align:"center"},(0,r.kt)("inlineCode",{parentName:"td"},"String")),(0,r.kt)("td",{parentName:"tr",align:"center"},"optional"),(0,r.kt)("td",{parentName:"tr",align:null},"Message topic")))),(0,r.kt)("p",null,"Response"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"strong"},"Bool"))," -\n",(0,r.kt)("inlineCode",{parentName:"li"},"true")," on success or\nan ",(0,r.kt)("a",{parentName:"li",href:"https://www.jsonrpc.org/specification#error_object"},"error")," on failure.")),(0,r.kt)("h3",{id:"get_waku_v2_filter_v1_messages"},(0,r.kt)("inlineCode",{parentName:"h3"},"get_waku_v2_filter_v1_messages")),(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},"get_waku_v2_filter_v1_messages")," method returns a list of messages\nthat were received on a subscribed content ",(0,r.kt)("inlineCode",{parentName:"p"},"topic"),"\nafter the last time this method was called.\nThe server MUST respond with an\n",(0,r.kt)("a",{parentName:"p",href:"https://www.jsonrpc.org/specification#error_object"},"error"),"\nif no subscription exists for the polled content ",(0,r.kt)("inlineCode",{parentName:"p"},"topic"),".\nIf no message has yet been received on the polled content ",(0,r.kt)("inlineCode",{parentName:"p"},"topic"),",\nthe server SHOULD respond with an empty list.\nThis method can be used to poll a content ",(0,r.kt)("inlineCode",{parentName:"p"},"topic")," for new messages."),(0,r.kt)("p",null,"Parameters"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:"right"},"Field"),(0,r.kt)("th",{parentName:"tr",align:"center"},"Type"),(0,r.kt)("th",{parentName:"tr",align:"center"},"Inclusion"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"right"},(0,r.kt)("inlineCode",{parentName:"td"},"contentTopic")),(0,r.kt)("td",{parentName:"tr",align:"center"},(0,r.kt)("inlineCode",{parentName:"td"},"String")),(0,r.kt)("td",{parentName:"tr",align:"center"},"mandatory"),(0,r.kt)("td",{parentName:"tr",align:null},"The content topic to poll for the latest messages")))),(0,r.kt)("p",null,"Response"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"strong"},"Array"),"[",(0,r.kt)("a",{parentName:"strong",href:"#wakumessage"},(0,r.kt)("inlineCode",{parentName:"a"},"WakuMessage")),"]")," -\nthe latest ",(0,r.kt)("inlineCode",{parentName:"li"},"messages")," on the polled content ",(0,r.kt)("inlineCode",{parentName:"li"},"topic")," or\nan ",(0,r.kt)("a",{parentName:"li",href:"https://www.jsonrpc.org/specification#error_object"},"error")," on failure.")),(0,r.kt)("h2",{id:"admin-api"},"Admin API"),(0,r.kt)("p",null,"The Admin API provides privileged accesses\nto the internal operations of a Waku v2 node."),(0,r.kt)("p",null,"The following structured types are defined for use on the Admin API:"),(0,r.kt)("h3",{id:"wakupeer"},"WakuPeer"),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"WakuPeer")," is an ",(0,r.kt)("inlineCode",{parentName:"p"},"Object")," containing the following fields:"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:"right"},"Field"),(0,r.kt)("th",{parentName:"tr",align:"center"},"Type"),(0,r.kt)("th",{parentName:"tr",align:"center"},"Inclusion"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"right"},(0,r.kt)("inlineCode",{parentName:"td"},"multiaddr")),(0,r.kt)("td",{parentName:"tr",align:"center"},(0,r.kt)("inlineCode",{parentName:"td"},"String")),(0,r.kt)("td",{parentName:"tr",align:"center"},"mandatory"),(0,r.kt)("td",{parentName:"tr",align:null},"Multiaddress containing this peer's location and identity")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"right"},(0,r.kt)("inlineCode",{parentName:"td"},"protocol")),(0,r.kt)("td",{parentName:"tr",align:"center"},(0,r.kt)("inlineCode",{parentName:"td"},"String")),(0,r.kt)("td",{parentName:"tr",align:"center"},"mandatory"),(0,r.kt)("td",{parentName:"tr",align:null},"Protocol that this peer is registered for")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"right"},(0,r.kt)("inlineCode",{parentName:"td"},"connected")),(0,r.kt)("td",{parentName:"tr",align:"center"},(0,r.kt)("inlineCode",{parentName:"td"},"bool")),(0,r.kt)("td",{parentName:"tr",align:"center"},"mandatory"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"true")," if peer has active connection for this ",(0,r.kt)("inlineCode",{parentName:"td"},"protocol"),", ",(0,r.kt)("inlineCode",{parentName:"td"},"false")," if not")))),(0,r.kt)("h3",{id:"get_waku_v2_admin_v1_peers"},(0,r.kt)("inlineCode",{parentName:"h3"},"get_waku_v2_admin_v1_peers")),(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},"get_waku_v2_admin_v1_peers")," method returns an array of peers\nregistered on this node.\nSince a Waku v2 node may open either continuous or ad hoc connections,\ndepending on the negotiated protocol,\nthese peers may have different connected states.\nThe same peer MAY appear twice in the returned array,\nif it is registered for more than one protocol."),(0,r.kt)("p",null,"Parameters"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"none")),(0,r.kt)("p",null,"Response"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"strong"},"Array"),"[",(0,r.kt)("a",{parentName:"strong",href:"#wakupeer"},(0,r.kt)("inlineCode",{parentName:"a"},"WakuPeer")),"]")," - Array of peers registered on this node")),(0,r.kt)("h3",{id:"post_waku_v2_admin_v1_peers"},(0,r.kt)("inlineCode",{parentName:"h3"},"post_waku_v2_admin_v1_peers")),(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},"post_waku_v2_admin_v1_peers")," method connects a node to a list of peers."),(0,r.kt)("p",null,"Parameters"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:"right"},"Field"),(0,r.kt)("th",{parentName:"tr",align:"center"},"Type"),(0,r.kt)("th",{parentName:"tr",align:"center"},"Inclusion"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"right"},(0,r.kt)("inlineCode",{parentName:"td"},"peers")),(0,r.kt)("td",{parentName:"tr",align:"center"},(0,r.kt)("inlineCode",{parentName:"td"},"Array"),"[",(0,r.kt)("inlineCode",{parentName:"td"},"String"),"]"),(0,r.kt)("td",{parentName:"tr",align:"center"},"mandatory"),(0,r.kt)("td",{parentName:"tr",align:null},"Array of peer ",(0,r.kt)("inlineCode",{parentName:"td"},"multiaddrs")," to connect to. Each ",(0,r.kt)("inlineCode",{parentName:"td"},"multiaddr")," must contain the ",(0,r.kt)("a",{parentName:"td",href:"https://docs.libp2p.io/concepts/addressing/"},"location and identity addresses")," of a peer.")))),(0,r.kt)("p",null,"Response"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"strong"},"Bool"))," -\n",(0,r.kt)("inlineCode",{parentName:"li"},"true")," on success or\nan ",(0,r.kt)("a",{parentName:"li",href:"https://www.jsonrpc.org/specification#error_object"},"error")," on failure.")),(0,r.kt)("h2",{id:"example-usage"},"Example usage"),(0,r.kt)("p",null,"Store API"),(0,r.kt)("h3",{id:"get_waku_v2_store_v1_messages"},(0,r.kt)("inlineCode",{parentName:"h3"},"get_waku_v2_store_v1_messages")),(0,r.kt)("p",null,"This method is part of the ",(0,r.kt)("inlineCode",{parentName:"p"},"store")," API and\nthe specific resources to retrieve are (historical) ",(0,r.kt)("inlineCode",{parentName:"p"},"messages"),".\nThe protocol (",(0,r.kt)("inlineCode",{parentName:"p"},"waku"),") is on ",(0,r.kt)("inlineCode",{parentName:"p"},"v2"),", whereas the Store API definition is on ",(0,r.kt)("inlineCode",{parentName:"p"},"v1"),"."),(0,r.kt)("p",null,"1.",(0,r.kt)("inlineCode",{parentName:"p"},"get")," ",(0,r.kt)("em",{parentName:"p"},"all")," the historical messages for content topic\n",(0,r.kt)("strong",{parentName:"p"},'"/waku/2/default-content/proto"'),"; no paging required"),(0,r.kt)("h4",{id:"request"},"Request"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-curl"},'curl -d \'{"jsonrpc":"2.0","id":"id","method":"get_waku_v2_store_v1_messages", "params":["", [{"contentTopic":"/waku/2/default-content/proto"}]]}\' --header "Content-Type: application/json" http://localhost:8545\n')),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-jsonrpc"},'{\n  "jsonrpc": "2.0",\n  "id": "id",\n  "method": "get_waku_v2_store_v1_messages",\n  "params": [\n    "",\n    [\n      {"contentTopic": "/waku/2/default-content/proto"}\n    ]\n  ]\n}\n')),(0,r.kt)("p",null,"Response"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-jsonrpc"},'{\n  "jsonrpc": "2.0",\n  "id": "id",\n  "result": {\n    "messages": [\n      {\n        "payload": dGVzdDE,\n        "contentTopic": "/waku/2/default-content/proto",\n        "version": 0\n      },\n      {\n        "payload": dGVzdDI,\n        "contentTopic": "/waku/2/default-content/proto",\n        "version": 0\n      },\n      {\n        "payload": dGVzdDM,\n        "contentTopic": "/waku/2/default-content/proto",\n        "version": 0\n      }\n    ],\n    "pagingInfo": null\n  },\n  "error": null\n}\n')),(0,r.kt)("hr",null),(0,r.kt)("p",null,"2.",(0,r.kt)("inlineCode",{parentName:"p"},"get")," a single page of historical messages for content topic ",(0,r.kt)("strong",{parentName:"p"},'"/waku/2/default-content/proto"'),";\n2 messages per page, backward direction.\nSince this is the initial query, no ",(0,r.kt)("inlineCode",{parentName:"p"},"cursor")," is provided,\nso paging will be performed from the end of the list."),(0,r.kt)("p",null,"Request"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-curl"},'curl -d \'{"jsonrpc":"2.0","id":"id","method":"get_waku_v2_store_v1_messages", "params":[ "", [{"contentTopic":"/waku/2/default-content/proto"}],{"pageSize":2,"forward":false}]}\' --header "Content-Type: application/json" http://localhost:8545\n')),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-jsonrpc"},'{\n  "jsonrpc": "2.0",\n  "id": "id",\n  "method": "get_waku_v2_store_v1_messages",\n  "params": [\n    "",\n    [\n      {"contentTopic": "/waku/2/default-content/proto"}\n    ],\n    {\n      "pageSize": 2,\n      "forward": false\n    }\n  ]\n}\n')),(0,r.kt)("p",null,"Response"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-jsonrpc"},'{\n  "jsonrpc": "2.0",\n  "id": "id",\n  "result": {\n    "messages": [\n      {\n        "payload": dGVzdDI,\n        "contentTopic": "/waku/2/default-content/proto",\n        "version": 0\n      },\n      {\n        "payload": dGVzdDM,\n        "contentTopic": "/waku/2/default-content/proto",\n        "version": 0\n      }\n    ],\n    "pagingInfo": {\n      "pageSize": 2,\n      "cursor": {\n        "digest": "abcdef",\n        "receivedTime": 1605887187000000000\n      },\n      "forward": false\n    }\n  },\n  "error": null\n}\n')),(0,r.kt)("hr",null),(0,r.kt)("p",null,"3.",(0,r.kt)("inlineCode",{parentName:"p"},"get")," the next page of historical messages for content topic ",(0,r.kt)("strong",{parentName:"p"},'"/waku/2/default-content/proto"'),",\nusing the cursor received above; 2 messages per page, backward direction."),(0,r.kt)("p",null,"Request"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-curl"},'curl -d \'{"jsonrpc":"2.0","id":"id","method":"get_waku_v2_store_v1_messages", "params":[ "", [{"contentTopic":"/waku/2/default-content/proto"}],{"pageSize":2,"cursor":{"digest":"abcdef","receivedTime":1605887187000000000},"forward":false}]}\' --header "Content-Type: application/json" http://localhost:8545\n')),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-jsonrpc"},'{\n  "jsonrpc": "2.0",\n  "id": "id",\n  "method": "get_waku_v2_store_v1_messages",\n  "params": [\n    "",\n    [\n      {"contentTopic": "/waku/2/default-content/proto"}\n    ],\n    {\n      "pageSize": 2,\n      "cursor": {\n        "digest": "abcdef",\n        "receivedTime": 1605887187000000000\n      },\n      "forward": false\n    }\n  ]\n}\n')),(0,r.kt)("p",null,"Response"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-jsonrpc"},'{\n  "jsonrpc": "2.0",\n  "id": "id",\n  "result": {\n    "messages": [\n      {\n        "payload": dGVzdDE,\n        "contentTopic": "/waku/2/default-content/proto",\n        "version": 0\n      },\n    ],\n    "pagingInfo": {\n      "pageSize": 2,\n      "cursor": {\n        "digest": "123abc",\n        "receivedTime": 1605866187000000000\n      },\n      "forward": false\n    }\n  },\n  "error": null\n}\n')),(0,r.kt)("h2",{id:"copyright"},"Copyright"),(0,r.kt)("p",null,"Copyright and related rights waived via ",(0,r.kt)("a",{parentName:"p",href:"https://creativecommons.org/publicdomain/zero/1.0/"},"CC0"),"."),(0,r.kt)("h2",{id:"references"},"References"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("a",{parentName:"li",href:"https://www.jsonrpc.org/specification"},"JSON-RPC specification")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("a",{parentName:"li",href:"https://docs.libp2p.io/concepts/addressing/"},"LibP2P Addressing")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("a",{parentName:"li",href:"https://github.com/libp2p/specs/tree/master/pubsub#the-topic-descriptor"},"LibP2P PubSub specification - topic descriptor")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("a",{parentName:"li",href:"../10/waku2"},"Waku v2 specification")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("a",{parentName:"li",href:"https://datatracker.ietf.org/doc/html/rfc4648"},"IETF RFC 4648 - The Base16, Base32, and Base64 Data Encodings"))))}m.isMDXComponent=!0},3905:(e,t,n)=>{n.d(t,{Zo:()=>d,kt:()=>c});var a=n(67294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function p(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var o=a.createContext({}),s=function(e){var t=a.useContext(o),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},d=function(e){var t=s(e.components);return a.createElement(o.Provider,{value:t},e.children)},m={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},k=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,i=e.originalType,o=e.parentName,d=p(e,["components","mdxType","originalType","parentName"]),k=s(n),c=r,u=k["".concat(o,".").concat(c)]||k[c]||m[c]||i;return n?a.createElement(u,l(l({ref:t},d),{},{components:n})):a.createElement(u,l({ref:t},d))}));function c(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=n.length,l=new Array(i);l[0]=k;var p={};for(var o in t)hasOwnProperty.call(t,o)&&(p[o]=t[o]);p.originalType=e,p.mdxType="string"==typeof e?e:r,l[1]=p;for(var s=2;s<i;s++)l[s]=n[s];return a.createElement.apply(null,l)}return a.createElement.apply(null,n)}k.displayName="MDXCreateElement"}}]);