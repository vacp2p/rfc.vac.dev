"use strict";(self.webpackChunklogos_docs_template=self.webpackChunklogos_docs_template||[]).push([[2221],{55133:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>l,contentTitle:()=>s,default:()=>u,frontMatter:()=>i,metadata:()=>o,toc:()=>p});var n=a(87462),r=(a(67294),a(3905));const i={title:"CLIENT",name:"Client",status:"deprecated",description:"This specification describes how to write a Status client for communicating with other Status clients.",editor:"Filip Dimitrijevic &lt;filip@status.im&gt;",contributors:["Adam Babik &lt;adam@status.im&gt;","Andrea Maria Piana &lt;andreap@status.im&gt;","Dean Eigenmann &lt;dean@status.im&gt;","Corey Petty &lt;corey@status.im&gt;","Oskar Thor\xe9n &lt;oskar@status.im&gt;","Samuel Hawksby-Robinson &lt;samuel@status.im&gt;"]},s=void 0,o={unversionedId:"deprecated/client",id:"deprecated/client",title:"CLIENT",description:"This specification describes how to write a Status client for communicating with other Status clients.",source:"@site/status/deprecated/client.md",sourceDirName:"deprecated",slug:"/deprecated/client",permalink:"/status/deprecated/client",draft:!1,tags:[],version:"current",frontMatter:{title:"CLIENT",name:"Client",status:"deprecated",description:"This specification describes how to write a Status client for communicating with other Status clients.",editor:"Filip Dimitrijevic &lt;filip@status.im&gt;",contributors:["Adam Babik &lt;adam@status.im&gt;","Andrea Maria Piana &lt;andreap@status.im&gt;","Dean Eigenmann &lt;dean@status.im&gt;","Corey Petty &lt;corey@status.im&gt;","Oskar Thor\xe9n &lt;oskar@status.im&gt;","Samuel Hawksby-Robinson &lt;samuel@status.im&gt;"]},sidebar:"defaultSidebar",previous:{title:"ACCOUNT",permalink:"/status/deprecated/account"},next:{title:"Dapp browser API usage",permalink:"/status/deprecated/dapp-browser-API-usage"}},l={},p=[{value:"Abstract",id:"abstract",level:2},{value:"Introduction",id:"introduction",level:2},{value:"Protocol layers",id:"protocol-layers",level:3},{value:"Protobuf",id:"protobuf",level:3},{value:"Components",id:"components",level:2},{value:"P2P Overlay",id:"p2p-overlay",level:3},{value:"Node discovery and roles",id:"node-discovery-and-roles",level:4},{value:"Bootstrapping",id:"bootstrapping",level:4},{value:"Discovery",id:"discovery",level:4},{value:"Mobile nodes",id:"mobile-nodes",level:4},{value:"Transport privacy and Whisper / Waku usage",id:"transport-privacy-and-whisper--waku-usage",level:3},{value:"Secure Transport",id:"secure-transport",level:3},{value:"Data Sync",id:"data-sync",level:3},{value:"Payloads and clients",id:"payloads-and-clients",level:3},{value:"BIPs and EIPs Standards support",id:"bips-and-eips-standards-support",level:3},{value:"Security Considerations",id:"security-considerations",level:2},{value:"Design Rationale",id:"design-rationale",level:2},{value:"Why devp2p? Why not use libp2p?",id:"why-devp2p-why-not-use-libp2p",level:3},{value:"What about other RLPx subprotocols like LES, and Swarm?",id:"what-about-other-rlpx-subprotocols-like-les-and-swarm",level:3},{value:"Why do you use Whisper?",id:"why-do-you-use-whisper",level:3},{value:"Why do you use Waku?",id:"why-do-you-use-waku",level:3},{value:"Why is PoW for Waku set so low?",id:"why-is-pow-for-waku-set-so-low",level:3},{value:"Why do you not use Discovery v5 for node discovery?",id:"why-do-you-not-use-discovery-v5-for-node-discovery",level:3},{value:"I heard something about <code>Mailservers</code> being trusted somehow?",id:"i-heard-something-about-mailservers-being-trusted-somehow",level:3},{value:"Data sync",id:"data-sync-1",level:3},{value:"Why is MVDS not used for public chats?",id:"why-is-mvds-not-used-for-public-chats",level:4},{value:"Footnotes",id:"footnotes",level:2},{value:"Appendix A: Security considerations",id:"appendix-a-security-considerations",level:2},{value:"Scalability and UX",id:"scalability-and-ux",level:3},{value:"Privacy",id:"privacy",level:3},{value:"Spam resistance",id:"spam-resistance",level:3},{value:"Censorship resistance",id:"censorship-resistance",level:3},{value:"Acknowledgments",id:"acknowledgments",level:2},{value:"Changelog",id:"changelog",level:2},{value:"Version 0.3",id:"version-03",level:3},{value:"Copyright",id:"copyright",level:2},{value:"References",id:"references",level:2}],d={toc:p};function u(e){let{components:t,...a}=e;return(0,r.kt)("wrapper",(0,n.Z)({},d,a,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Status: deprecated"),(0,r.kt)("li",{parentName:"ul"},"Editor: Filip Dimitrijevic ","<",(0,r.kt)("a",{parentName:"li",href:"mailto:filip@status.im"},"filip@status.im"),">"),(0,r.kt)("li",{parentName:"ul"},"Contributors:",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"Adam Babik ","<",(0,r.kt)("a",{parentName:"li",href:"mailto:adam@status.im"},"adam@status.im"),">"),(0,r.kt)("li",{parentName:"ul"},"Andrea Maria Piana ","<",(0,r.kt)("a",{parentName:"li",href:"mailto:andreap@status.im"},"andreap@status.im"),">"),(0,r.kt)("li",{parentName:"ul"},"Dean Eigenmann ","<",(0,r.kt)("a",{parentName:"li",href:"mailto:dean@status.im"},"dean@status.im"),">"),(0,r.kt)("li",{parentName:"ul"},"Corey Petty ","<",(0,r.kt)("a",{parentName:"li",href:"mailto:corey@status.im"},"corey@status.im"),">"),(0,r.kt)("li",{parentName:"ul"},"Oskar Thor\xe9n ","<",(0,r.kt)("a",{parentName:"li",href:"mailto:oskar@status.im"},"oskar@status.im"),">"),(0,r.kt)("li",{parentName:"ul"},"Samuel Hawksby-Robinson ","<",(0,r.kt)("a",{parentName:"li",href:"mailto:samuel@status.im"},"samuel@status.im"),">")))),(0,r.kt)("h2",{id:"abstract"},"Abstract"),(0,r.kt)("p",null,"This specification describes how to write a Status client for communicating",(0,r.kt)("br",{parentName:"p"}),"\n","with other Status clients.",(0,r.kt)("br",{parentName:"p"}),"\n","This specification presents a reference implementation of the protocol\nused in a command-line client and a mobile app."),(0,r.kt)("p",null,"This document consists of two parts.",(0,r.kt)("br",{parentName:"p"}),"\n","The first outlines the specifications required to be a full Status client.",(0,r.kt)("br",{parentName:"p"}),"\n","The second provides a design rationale and answers some common questions."),(0,r.kt)("h2",{id:"introduction"},"Introduction"),(0,r.kt)("h3",{id:"protocol-layers"},"Protocol layers"),(0,r.kt)("p",null,"Implementing a Status clients largely means implementing the following layers.\nAdditionally, there are separate specifications for things like key management and account lifecycle."),(0,r.kt)("p",null,"Other aspects, such as how a node uses IPFS for stickers or how the browser works, are currently underspecified.\nThese specifications facilitate the implementation of a Status client for basic private communication."),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Layer"),(0,r.kt)("th",{parentName:"tr",align:null},"Purpose"),(0,r.kt)("th",{parentName:"tr",align:null},"Technology"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Data and payloads"),(0,r.kt)("td",{parentName:"tr",align:null},"End user functionality"),(0,r.kt)("td",{parentName:"tr",align:null},"1:1, group chat, public chat")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Data sync"),(0,r.kt)("td",{parentName:"tr",align:null},"Data consistency"),(0,r.kt)("td",{parentName:"tr",align:null},"MVDS.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Secure transport"),(0,r.kt)("td",{parentName:"tr",align:null},"Confidentiality, PFS, etc"),(0,r.kt)("td",{parentName:"tr",align:null},"Double Ratchet")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Transport privacy"),(0,r.kt)("td",{parentName:"tr",align:null},"Routing, Metadata protection"),(0,r.kt)("td",{parentName:"tr",align:null},"Waku / Whisper")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"P2P Overlay"),(0,r.kt)("td",{parentName:"tr",align:null},"Overlay routing, NAT traversal"),(0,r.kt)("td",{parentName:"tr",align:null},"devp2p")))),(0,r.kt)("h3",{id:"protobuf"},"Protobuf"),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"https://developers.google.com/protocol-buffers/"},(0,r.kt)("inlineCode",{parentName:"a"},"protobuf"))," is used in different layers, version ",(0,r.kt)("inlineCode",{parentName:"p"},"proto3")," used is unless stated otherwise."),(0,r.kt)("h2",{id:"components"},"Components"),(0,r.kt)("h3",{id:"p2p-overlay"},"P2P Overlay"),(0,r.kt)("p",null,"Status clients run on a public, permissionless peer-to-peer network, as specified by the devP2P\nnetwork protocols. devP2P provides a protocol for node discovery which is in\ndraft mode\n",(0,r.kt)("a",{parentName:"p",href:"https://github.com/ethereum/devp2p/blob/master/discv5/discv5.md"},"here"),". See\nmore on node discovery and management in the next section."),(0,r.kt)("p",null,"To communicate between Status nodes, the ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/ethereum/devp2p/blob/master/rlpx.md"},"RLPx Transport\nProtocol, v5")," is used, which\nallows for TCP-based communication between nodes."),(0,r.kt)("p",null,"On top of this RLPx-based subprotocols are ran, the client\nSHOULD NOT use ",(0,r.kt)("a",{parentName:"p",href:"https://eips.ethereum.org/EIPS/eip-627"},"Whisper V6"),", the client\nSHOULD use ",(0,r.kt)("a",{parentName:"p",href:"/waku/standards/legacy/6/waku1"},"Waku V1"),"\nfor privacy-preserving messaging and efficient usage of a node's bandwidth."),(0,r.kt)("h4",{id:"node-discovery-and-roles"},"Node discovery and roles"),(0,r.kt)("p",null,"There are four types of node roles:"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("inlineCode",{parentName:"li"},"Bootstrap node")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("inlineCode",{parentName:"li"},"Whisper/Waku relayer")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("inlineCode",{parentName:"li"},"Mailserver")," (servers and clients)"),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("inlineCode",{parentName:"li"},"Mobile node")," (Status Clients)")),(0,r.kt)("p",null,"A standard Status client MUST implement both ",(0,r.kt)("inlineCode",{parentName:"p"},"Whisper/Waku relayer")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"Mobile node")," node types. The\nother node types are optional, but it is RECOMMEND to implement a ",(0,r.kt)("inlineCode",{parentName:"p"},"Mailserver"),"\nclient mode, otherwise the user experience is likely to be poor."),(0,r.kt)("h4",{id:"bootstrapping"},"Bootstrapping"),(0,r.kt)("p",null,"Bootstrap nodes allow Status nodes to discover and connect to other Status nodes\nin the network."),(0,r.kt)("p",null,"Currently, Status Gmbh provides the main bootstrap nodes, but anyone can\nrun these provided they are connected to the rest of the Whisper/Waku network."),(0,r.kt)("p",null,"Status maintains a list of production fleet bootstrap nodes in the following locations:"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Hong Kong:")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"enode://6e6554fb3034b211398fcd0f0082cbb6bd13619e1a7e76ba66e1809aaa0c5f1ac53c9ae79cf2fd4a7bacb10d12010899b370c75fed19b991d9c0cdd02891abad@47.75.99.169:443")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"enode://23d0740b11919358625d79d4cac7d50a34d79e9c69e16831c5c70573757a1f5d7d884510bc595d7ee4da3c1508adf87bbc9e9260d804ef03f8c1e37f2fb2fc69@47.52.106.107:443"))),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Amsterdam:")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"enode://436cc6f674928fdc9a9f7990f2944002b685d1c37f025c1be425185b5b1f0900feaf1ccc2a6130268f9901be4a7d252f37302c8335a2c1a62736e9232691cc3a@178.128.138.128:443")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"enode://5395aab7833f1ecb671b59bf0521cf20224fe8162fc3d2675de4ee4d5636a75ec32d13268fc184df8d1ddfa803943906882da62a4df42d4fccf6d17808156a87@178.128.140.188:443"))),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Central US:")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"enode://32ff6d88760b0947a3dee54ceff4d8d7f0b4c023c6dad34568615fcae89e26cc2753f28f12485a4116c977be937a72665116596265aa0736b53d46b27446296a@34.70.75.208:443")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"enode://5405c509df683c962e7c9470b251bb679dd6978f82d5b469f1f6c64d11d50fbd5dd9f7801c6ad51f3b20a5f6c7ffe248cc9ab223f8bcbaeaf14bb1c0ef295fd0@35.223.215.156:443"))),(0,r.kt)("p",null,"These bootstrap nodes MAY change and are not guaranteed to stay this way forever\nand at some point circumstances might force them to change."),(0,r.kt)("h4",{id:"discovery"},"Discovery"),(0,r.kt)("p",null,"A Status client MUST discover or have a list of peers to connect to. Status uses a\nlight discovery mechanism based on a combination of ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/ethereum/devp2p/blob/master/discv5/discv5.md"},"Discovery v5")," and\n",(0,r.kt)("a",{parentName:"p",href:"https://github.com/libp2p/specs/tree/master/rendezvous"},"Rendezvous Protocol"),",\n(with some ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/status-im/rendezvous#differences-with-original-rendezvous"},"modifications"),").\nAdditionally, some static nodes MAY also be used."),(0,r.kt)("p",null,"A Status client MUST use at least one discovery method or use static nodes\nto communicate with other clients."),(0,r.kt)("p",null,"Discovery V5 uses bootstrap nodes to discover other peers. Bootstrap nodes MUST support\nDiscovery V5 protocol as well in order to provide peers. It is kademlia-based discovery mechanism\nand it might consume significant (at least on mobile) amount of network traffic to operate."),(0,r.kt)("p",null,"In order to take advantage from simpler and more mobile-friendly peers discovery mechanism,\ni.e. Rendezvous protocol, one MUST provide a list of Rendezvous nodes which speak\nRendezvous protocol. Rendezvous protocol is request-response discovery mechanism.\nIt uses Ethereum Node Records (ENR) to report discovered peers."),(0,r.kt)("p",null,"Both peers discovery mechanisms use topics to provide peers with certain capabilities.\nThere is no point in returning peers that do not support a particular protocol.\nStatus nodes that want to be discovered MUST register to Discovery V5 and/or Rendezvous\nwith the ",(0,r.kt)("inlineCode",{parentName:"p"},"whisper")," topic. Status nodes that are ",(0,r.kt)("inlineCode",{parentName:"p"},"Mailservers")," and want to\nbe discoverable MUST additionally register with the ",(0,r.kt)("inlineCode",{parentName:"p"},"whispermail")," topic."),(0,r.kt)("p",null,"It is RECOMMENDED to use both mechanisms but at the same time implement a structure\ncalled ",(0,r.kt)("inlineCode",{parentName:"p"},"PeerPool"),". ",(0,r.kt)("inlineCode",{parentName:"p"},"PeerPool")," is responsible for maintaining an optimal number of peers.\nFor mobile nodes, there is no significant advantage to have more than 2-3 peers and one ",(0,r.kt)("inlineCode",{parentName:"p"},"Mailserver"),".\n",(0,r.kt)("inlineCode",{parentName:"p"},"PeerPool")," can notify peers discovery protocol implementations that they should suspend\ntheir execution because the optimal number of peers is found. They should resume\nif the number of connected peers drops or a ",(0,r.kt)("inlineCode",{parentName:"p"},"Mailserver")," disconnects."),(0,r.kt)("p",null,"It is worth noticing that an efficient caching strategy MAY be of great use, especially,\non mobile devices. Discovered peers can be cached as they rarely change and used\nwhen the client starts again. In such a case, there might be no need to even start\npeers discovery protocols because cached peers will satisfy the optimal number of peers."),(0,r.kt)("p",null,"Alternatively, a client MAY rely exclusively on a list of static peers. This is the most efficient\nway because there are no peers discovery algorithm overhead introduced. The disadvantage\nis that these peers might be gone and without peers discovery mechanism, it won't be possible to find\nnew ones."),(0,r.kt)("p",null,"The current list of static peers is published on ","<",(0,r.kt)("a",{parentName:"p",href:"https://fleets.status.im/"},"https://fleets.status.im/"),">",". ",(0,r.kt)("inlineCode",{parentName:"p"},"eth.prod")," is the current\ngroup of peers the official Status client uses. The others are test networks."),(0,r.kt)("p",null,"Finally, Waku node addresses can be retrieved by traversing\nthe merkle tree found at ",(0,r.kt)("a",{parentName:"p",href:"https://fleets.status.im"},(0,r.kt)("inlineCode",{parentName:"a"},"fleets.status.im")),", as described in ",(0,r.kt)("a",{parentName:"p",href:"https://eips.ethereum.org/EIPS/eip-1459#client-protocol"},"EIP-1459"),"."),(0,r.kt)("h4",{id:"mobile-nodes"},"Mobile nodes"),(0,r.kt)("p",null,"A ",(0,r.kt)("inlineCode",{parentName:"p"},"Mobile node")," is a Whisper and/or Waku node which connects to part of the respective Whisper\nand/or Waku network(s). A ",(0,r.kt)("inlineCode",{parentName:"p"},"Mobile node")," MAY relay messages. See next section for more details on how\nto use Whisper and/or Waku to communicate with other Status nodes."),(0,r.kt)("h3",{id:"transport-privacy-and-whisper--waku-usage"},"Transport privacy and Whisper / Waku usage"),(0,r.kt)("p",null,"Once a Whisper and/or Waku node is up and running there are some specific settings required\nto communicate with other Status nodes."),(0,r.kt)("p",null,"See ",(0,r.kt)("a",{parentName:"p",href:"/status/deprecated/whisper-usage"},"WHISPER-USAGE")," and ",(0,r.kt)("a",{parentName:"p",href:"/status/deprecated/waku-usage"},"WAKU-USAGE")," for more details."),(0,r.kt)("p",null,"For providing an offline inbox, see the complementary ",(0,r.kt)("a",{parentName:"p",href:"/status/deprecated/whisper-mailserver"},"WHISPER-MAILSERVER")," and ",(0,r.kt)("a",{parentName:"p",href:"/status/deprecated/waku-mailserver"},"WAKU-MAILSERVER"),"."),(0,r.kt)("h3",{id:"secure-transport"},"Secure Transport"),(0,r.kt)("p",null,"In order to provide confidentiality, integrity, authentication and forward\nsecrecy of messages the node implements a secure transport on top of Whisper and Waku. This is\nused in 1:1 chats and group chats, but not for public chats. See ",(0,r.kt)("a",{parentName:"p",href:"/status/deprecated/secure-transport"},"SECURE-TRANSPORT")," for more."),(0,r.kt)("h3",{id:"data-sync"},"Data Sync"),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"/vac/2/mvds"},"MVDS")," is used for 1:1 and group chats, however it is currently not in use for public chats.\n",(0,r.kt)("a",{parentName:"p",href:"#payloads-and-clients"},"Status payloads")," are serialized and then wrapped inside an\nMVDS message which is added to an ",(0,r.kt)("a",{parentName:"p",href:"/vac/2/mvds##payloads"},"MVDS payload"),",\nthe node encrypts this payload (if necessary for 1-to-1 / group-chats) and sends it using\nWhisper or Waku which also encrypts it."),(0,r.kt)("h3",{id:"payloads-and-clients"},"Payloads and clients"),(0,r.kt)("p",null,"On top of secure transport, various types of data sync clients and\nthe node uses payload formats for things like 1:1 chat, group chat and public chat. These have\nvarious degrees of standardization. Please refer to ",(0,r.kt)("a",{parentName:"p",href:"/status/deprecated/payloads"},"PAYLOADS")," for more details."),(0,r.kt)("h3",{id:"bips-and-eips-standards-support"},"BIPs and EIPs Standards support"),(0,r.kt)("p",null,"For a list of EIPs and BIPs that SHOULD be supported by Status client, please\nsee ",(0,r.kt)("a",{parentName:"p",href:"/status/deprecated/eips"},"EIPS"),"."),(0,r.kt)("h2",{id:"security-considerations"},"Security Considerations"),(0,r.kt)("p",null,"See ",(0,r.kt)("a",{parentName:"p",href:"#appendix-a-security-considerations"},"Appendix A")),(0,r.kt)("h2",{id:"design-rationale"},"Design Rationale"),(0,r.kt)("p",null,"P2P Overlay"),(0,r.kt)("h3",{id:"why-devp2p-why-not-use-libp2p"},"Why devp2p? Why not use libp2p?"),(0,r.kt)("p",null,"At the time Status developed the main Status clients, devp2p was the most\nmature. However, in the future libp2p is likely to be used, as it'll\nprovide us with multiple transports, better protocol negotiation, NAT traversal,\netc."),(0,r.kt)("p",null,"For very experimental bridge support, see the bridge between libp2p and devp2p\nin ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/status-im/murmur"},"Murmur"),"."),(0,r.kt)("h3",{id:"what-about-other-rlpx-subprotocols-like-les-and-swarm"},"What about other RLPx subprotocols like LES, and Swarm?"),(0,r.kt)("p",null,"Status is primarily optimized for resource restricted devices, and at present\ntime light client support for these protocols are suboptimal. This is a work in\nprogress."),(0,r.kt)("p",null,"For better Ethereum light client support, see ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/status-im/status-go/issues/1025"},"Re-enable LES as\noption"),". For better Swarm\nsupport, see ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/ethersphere/SWIPs/pull/12"},"Swarm adaptive\nnodes"),"."),(0,r.kt)("p",null,"For transaction support, Status clients currently have to rely on Infura."),(0,r.kt)("p",null,"Status clients currently do not offer native support for file storage."),(0,r.kt)("h3",{id:"why-do-you-use-whisper"},"Why do you use Whisper?"),(0,r.kt)("p",null,"Whisper is one of the ",(0,r.kt)("a",{parentName:"p",href:"http://gavwood.com/dappsweb3.html"},"three parts")," of the\nvision of Ethereum as the world computer, Ethereum and Swarm being the other\ntwo. Status was started as an encapsulation of and a clear window to this world\ncomputer."),(0,r.kt)("h3",{id:"why-do-you-use-waku"},"Why do you use Waku?"),(0,r.kt)("p",null,"Waku is a direct upgrade and replacement for Whisper, the main motivation for\ndeveloping and implementing Waku can be found in the ",(0,r.kt)("a",{parentName:"p",href:"/waku/"},"Waku specs"),"."),(0,r.kt)("p",null,">","Waku was created to incrementally improve in areas that Whisper is lacking in,\n",">","with special attention to resource restricted devices. We specify the standard for\n",">","Waku messages in order to ensure forward compatibility of different Waku clients,\n",">","backwards compatibility with Whisper clients, as well as to allow multiple\n",">","implementations of Waku and its capabilities. We also modify the language to be more\n",">","unambiguous, concise and consistent."),(0,r.kt)("p",null,"Considerable work has gone into the active development of Ethereum, in contrast Whisper\nis not currently under active development, and it has several drawbacks. Among others:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Whisper is very wasteful bandwidth-wise and doesn't appear to be scalable"),(0,r.kt)("li",{parentName:"ul"},"Proof of work is a poor spam protection mechanism for heterogeneous devices"),(0,r.kt)("li",{parentName:"ul"},"The privacy guarantees provided are not rigorous"),(0,r.kt)("li",{parentName:"ul"},"There are no incentives to run a node")),(0,r.kt)("p",null,"Finding a more suitable transport privacy is an ongoing research effort,\ntogether with ",(0,r.kt)("a",{parentName:"p",href:"https://vac.dev/vac-overview"},"Vac")," and other teams in the space."),(0,r.kt)("h3",{id:"why-is-pow-for-waku-set-so-low"},"Why is PoW for Waku set so low?"),(0,r.kt)("p",null,"A higher PoW would be desirable, but this kills the battery on mobile phones,\nwhich is a prime target for Status clients."),(0,r.kt)("p",null,"This means the network is currently vulnerable to DDoS attacks. Alternative\nmethods of spam protection are currently being researched."),(0,r.kt)("h3",{id:"why-do-you-not-use-discovery-v5-for-node-discovery"},"Why do you not use Discovery v5 for node discovery?"),(0,r.kt)("p",null,"At the time of implementing dynamic node discovery, Discovery v5 wasn't completed\nyet. Additionally, running a DHT on a mobile leads to slow node discovery, bad\nbattery and poor bandwidth usage. Instead, each client can choose to turn on\nDiscovery v5 for a short period until the node populates their peer list."),(0,r.kt)("p",null,"For some further investigation, see\n",(0,r.kt)("a",{parentName:"p",href:"https://github.com/status-im/swarms/blob/master/ideas/092-disc-v5-research.md"},"here"),"."),(0,r.kt)("h3",{id:"i-heard-something-about-mailservers-being-trusted-somehow"},"I heard something about ",(0,r.kt)("inlineCode",{parentName:"h3"},"Mailservers")," being trusted somehow?"),(0,r.kt)("p",null,"In order to use a ",(0,r.kt)("inlineCode",{parentName:"p"},"Mailserver"),", a given node needs to connect to it directly, i.e. add the ",(0,r.kt)("inlineCode",{parentName:"p"},"Mailserver"),"\nas its peer and mark it as trusted.\nThis means that the ",(0,r.kt)("inlineCode",{parentName:"p"},"Mailserver")," is able to send direct p2p messages to the node instead of broadcasting them.\nEffectively, it knows the bloom filter of the topics the node is interested in,\nwhen it is online as well as many metadata like IP address."),(0,r.kt)("h3",{id:"data-sync-1"},"Data sync"),(0,r.kt)("h4",{id:"why-is-mvds-not-used-for-public-chats"},"Why is MVDS not used for public chats?"),(0,r.kt)("p",null,"Currently, public chats are broadcast-based, and there's no direct way of finding\nout who is receiving messages. Hence there's no clear group sync state context\nwhereby participants can sync. Additionally, MVDS is currently not optimized for\nlarge group contexts, which means bandwidth usage will be a lot higher than\nreasonable. See ",(0,r.kt)("a",{parentName:"p",href:"https://vac.dev/p2p-data-sync-for-mobile"},"P2P Data Sync for Mobile")," for more.\nThis is an active area of research."),(0,r.kt)("h2",{id:"footnotes"},"Footnotes"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"<",(0,r.kt)("a",{parentName:"li",href:"https://github.com/status-im/status-protocol-go/"},"https://github.com/status-im/status-protocol-go/"),">"),(0,r.kt)("li",{parentName:"ol"},"<",(0,r.kt)("a",{parentName:"li",href:"https://github.com/status-im/status-console-client/"},"https://github.com/status-im/status-console-client/"),">"),(0,r.kt)("li",{parentName:"ol"},"<",(0,r.kt)("a",{parentName:"li",href:"https://github.com/status-im/status-mobile/"},"https://github.com/status-im/status-mobile/"),">")),(0,r.kt)("h2",{id:"appendix-a-security-considerations"},"Appendix A: Security considerations"),(0,r.kt)("p",null,"There are several security considerations to take into account when running Status.\nChief among them are: scalability, DDoS-resistance and privacy.\nThese also vary depending on what capabilities are used, such as ",(0,r.kt)("inlineCode",{parentName:"p"},"Mailserver"),", light node, and so on."),(0,r.kt)("h3",{id:"scalability-and-ux"},"Scalability and UX"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Bandwidth usage:")),(0,r.kt)("p",null,"In version 1 of Status, bandwidth usage is likely to be an issue.\nIn Status version 1.1 this is partially addressed with Waku usage, see ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/vacp2p/research/tree/dcc71f4779be832d3b5ece9c4e11f1f7ec24aac2/whisper_scalability"},"the theoretical scaling model"),"."),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},(0,r.kt)("inlineCode",{parentName:"strong"},"Mailserver")," High Availability requirement:")),(0,r.kt)("p",null,"A ",(0,r.kt)("inlineCode",{parentName:"p"},"Mailserver")," has to be online to receive messages for other nodes, this puts a high availability requirement on it."),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Gossip-based routing:")),(0,r.kt)("p",null,"Use of gossip-based routing doesn't necessarily scale.\nIt means each node can see a message multiple times,\nand having too many light nodes can cause propagation probability that is too low.\nSee ",(0,r.kt)("a",{parentName:"p",href:"https://our.status.im/whisper-pss-comparison/"},"Whisper vs PSS")," for more and a possible Kademlia based alternative."),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Lack of incentives:")),(0,r.kt)("p",null,"Status currently lacks incentives to run nodes, which means node operators are more likely to create centralized choke points."),(0,r.kt)("h3",{id:"privacy"},"Privacy"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Light node privacy:")),(0,r.kt)("p",null,"The main privacy concern with light nodes is that directly connected peers will know that a message originates from them (as it are the only ones it sends). This means nodes can make assumptions about what messages (topics) their peers are interested in."),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Bloom filter privacy:")),(0,r.kt)("p",null,"A user reveals which messages they are interested in, by setting only the topics they are interested in on the bloom filter.\nThis is a fundamental trade-off between bandwidth usage and privacy,\nthough the trade-off space is likely suboptimal in terms of the ",(0,r.kt)("a",{parentName:"p",href:"https://eprint.iacr.org/2017/954.pdf"},"Anonymity")," ",(0,r.kt)("a",{parentName:"p",href:"https://petsymposium.org/2019/files/hotpets/slides/coordination-helps-anonymity-slides.pdf"},"trilemma"),"."),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},(0,r.kt)("inlineCode",{parentName:"strong"},"Mailserver client")," privacy:")),(0,r.kt)("p",null,"A ",(0,r.kt)("inlineCode",{parentName:"p"},"Mailserver client")," has to trust a ",(0,r.kt)("inlineCode",{parentName:"p"},"Mailserver"),", which means they can send direct traffic. This reveals what topics / bloom filter a node is interested in, along with its peerID (with IP)."),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Privacy guarantees not rigorous:")),(0,r.kt)("p",null,"Privacy for Whisper or Waku hasn't been studied rigorously for various threat models like global passive adversary, local active attacker, etc. This is unlike e.g. Tor and mixnets."),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Topic hygiene:")),(0,r.kt)("p",null,"Similar to bloom filter privacy, using a very specific topic reveals more information. See scalability model linked above."),(0,r.kt)("h3",{id:"spam-resistance"},"Spam resistance"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"PoW bad for heterogeneous devices:")),(0,r.kt)("p",null,"Proof of work is a poor spam prevention mechanism. A mobile device can only have a very low PoW in order not to use too much CPU / burn up its phone battery. This means someone can spin up a powerful node and overwhelm the network."),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},(0,r.kt)("inlineCode",{parentName:"strong"},"Mailserver")," trusted connection:")),(0,r.kt)("p",null,"A ",(0,r.kt)("inlineCode",{parentName:"p"},"Mailserver")," has a direct TCP connection, which means they are trusted to send traffic. This means a malicious or malfunctioning ",(0,r.kt)("inlineCode",{parentName:"p"},"Mailserver")," can overwhelm an individual node."),(0,r.kt)("h3",{id:"censorship-resistance"},"Censorship resistance"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Devp2p TCP port blockable:")),(0,r.kt)("p",null,"By default Devp2p runs on port ",(0,r.kt)("inlineCode",{parentName:"p"},"30303"),", which is not commonly used for any other service. This means it is easy to censor, e.g. airport WiFi. This can be mitigated somewhat by running on e.g. port ",(0,r.kt)("inlineCode",{parentName:"p"},"80")," or ",(0,r.kt)("inlineCode",{parentName:"p"},"443"),", but there are still outstanding issues. See libp2p and Tor's Pluggable Transport for how this can be improved."),(0,r.kt)("p",null,"See ","<",(0,r.kt)("a",{parentName:"p",href:"https://github.com/status-im/status-mobile/issues/6351"},"https://github.com/status-im/status-mobile/issues/6351"),">"," for some discussion."),(0,r.kt)("h2",{id:"acknowledgments"},"Acknowledgments"),(0,r.kt)("p",null,"Jacek Sieka"),(0,r.kt)("h2",{id:"changelog"},"Changelog"),(0,r.kt)("h3",{id:"version-03"},"Version 0.3"),(0,r.kt)("p",null,"Released ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/status-im/specs/commit/664dd1c9df6ad409e4c007fefc8c8945b8d324e8"},"May 22, 2020")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Added that Waku SHOULD be used"),(0,r.kt)("li",{parentName:"ul"},"Added that Whisper SHOULD NOT be used"),(0,r.kt)("li",{parentName:"ul"},"Added language to include Waku in all relevant places"),(0,r.kt)("li",{parentName:"ul"},"Change to keep ",(0,r.kt)("inlineCode",{parentName:"li"},"Mailserver")," term consistent")),(0,r.kt)("h2",{id:"copyright"},"Copyright"),(0,r.kt)("p",null,"Copyright and related rights waived via ",(0,r.kt)("a",{parentName:"p",href:"https://creativecommons.org/publicdomain/zero/1.0/"},"CC0"),"."),(0,r.kt)("h2",{id:"references"},"References"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://developers.google.com/protocol-buffers/"},"Protobuf")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://github.com/ethereum/devp2p/blob/master/discv5/discv5.md"},"Discv5")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://github.com/ethereum/devp2p/blob/master/rlpx.md"},"RLPx Transport Protocol, v5")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://eips.ethereum.org/EIPS/eip-627"},"Whisper V6")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"/waku/standards/legacy/6/waku1"},"Waku V1")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://github.com/libp2p/specs/tree/master/rendezvous"},"Rendezvous Protocol")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://github.com/status-im/rendezvous#differences-with-original-rendezvous"},"Rendezvous Protocol modifications")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://fleets.status.im"},"Fleets Status")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://eips.ethereum.org/EIPS/eip-1459#client-protocol"},"EIP-1459")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"/status/deprecated/whisper-usage"},"WHISPER-USAGE")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"/status/deprecated/waku-usage"},"WAKU-USAGE")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"/status/deprecated/whisper-mailserver"},"WHISPER-MAILSERVER")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"/status/deprecated/waku-mailserver"},"WAKU-MAILSERVER")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"/status/deprecated/secure-transport"},"SECURE-TRANSPORT")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"/vac/2/mvds"},"MVDS")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"/status/deprecated/payloads"},"PAYLOADS")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"/status/deprecated/eips"},"EIPS")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://github.com/status-im/murmur"},"Murmur")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://github.com/status-im/status-go/issues/1025"},"Re-enable LES as option")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://github.com/ethersphere/SWIPs/pull/12"},"Swarm adaptive nodes")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://our.status.im/whisper-pss-comparison/"},"Whisper vs PSS")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"/waku/"},"Waku specs")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://vac.dev/vac-overview"},"Vac")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://github.com/vacp2p/research/tree/dcc71f4779be832d3b5ece9c4e11f1f7ec24aac2/whisper_scalability"},"theoretical scaling model")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://eprint.iacr.org/2017/954.pdf"},"Anonymity")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://petsymposium.org/2019/files/hotpets/slides/coordination-helps-anonymity-slides.pdf"},"trilemma")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://our.status.im/whisper-pss-comparison/"},"Whisper vs PSS")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://github.com/status-im/swarms/blob/master/ideas/092-disc-v5-research.md"},"Discovery v5 research")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://vac.dev/p2p-data-sync-for-mobile"},"P2P Data Sync for Mobile")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://github.com/status-im/status-protocol-go/"},"Status protocol go")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://github.com/status-im/status-console-client/"},"Status console client")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://github.com/status-im/status-mobile/"},"Status mobile")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://github.com/status-im/status-mobile/issues/6351"},"Status mobile issue 6351"))))}u.isMDXComponent=!0},3905:(e,t,a)=>{a.d(t,{Zo:()=>d,kt:()=>m});var n=a(67294);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function i(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function s(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?i(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function o(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},i=Object.keys(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var l=n.createContext({}),p=function(e){var t=n.useContext(l),a=t;return e&&(a="function"==typeof e?e(t):s(s({},t),e)),a},d=function(e){var t=p(e.components);return n.createElement(l.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},c=n.forwardRef((function(e,t){var a=e.components,r=e.mdxType,i=e.originalType,l=e.parentName,d=o(e,["components","mdxType","originalType","parentName"]),c=p(a),m=r,h=c["".concat(l,".").concat(m)]||c[m]||u[m]||i;return a?n.createElement(h,s(s({ref:t},d),{},{components:a})):n.createElement(h,s({ref:t},d))}));function m(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=a.length,s=new Array(i);s[0]=c;var o={};for(var l in t)hasOwnProperty.call(t,l)&&(o[l]=t[l]);o.originalType=e,o.mdxType="string"==typeof e?e:r,s[1]=o;for(var p=2;p<i;p++)s[p]=a[p];return n.createElement.apply(null,s)}return n.createElement.apply(null,a)}c.displayName="MDXCreateElement"}}]);