"use strict";(self.webpackChunklogos_docs_template=self.webpackChunklogos_docs_template||[]).push([[9340],{75257:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>s,contentTitle:()=>o,default:()=>u,frontMatter:()=>i,metadata:()=>l,toc:()=>p});var n=a(87462),r=(a(67294),a(3905));const i={title:"10/WAKU2",name:"Waku v2",status:"draft",editor:"Hanno Cornelius &lt;hanno@status.im&gt;",contributors:["Sanaz Taheri &lt;sanaz@status.im&gt;","Hanno Cornelius &lt;hanno@status.im&gt;","Reeshav Khan &lt;reeshav@status.im&gt;","Daniel Kaiser &lt;danielkaiser@status.im&gt;","Oskar Thor\xe9n &lt;oskarth@titanproxy.com&gt;"]},o=void 0,l={unversionedId:"standards/core/10/waku2",id:"standards/core/10/waku2",title:"10/WAKU2",description:"- Status: draft",source:"@site/waku/standards/core/10/waku2.md",sourceDirName:"standards/core/10",slug:"/standards/core/10/waku2",permalink:"/waku/standards/core/10/waku2",draft:!1,tags:[],version:"current",frontMatter:{title:"10/WAKU2",name:"Waku v2",status:"draft",editor:"Hanno Cornelius &lt;hanno@status.im&gt;",contributors:["Sanaz Taheri &lt;sanaz@status.im&gt;","Hanno Cornelius &lt;hanno@status.im&gt;","Reeshav Khan &lt;reeshav@status.im&gt;","Daniel Kaiser &lt;danielkaiser@status.im&gt;","Oskar Thor\xe9n &lt;oskarth@titanproxy.com&gt;"]},sidebar:"defaultSidebar",previous:{title:"54/WAKU2-X3DH-SESSIONS",permalink:"/waku/standards/application/54/x3dh-sessions"},next:{title:"11/WAKU2-RELAY",permalink:"/waku/standards/core/11/relay"}},s={},p=[{value:"Abstract",id:"abstract",level:2},{value:"Motivation and Goals",id:"motivation-and-goals",level:2},{value:"Specification",id:"specification",level:2},{value:"Network Interaction Domains",id:"network-interaction-domains",level:3},{value:"Protocols and Identifiers",id:"protocols-and-identifiers",level:4},{value:"Use of libp2p and Protobuf",id:"use-of-libp2p-and-protobuf",level:4},{value:"Gossip Domain",id:"gossip-domain",level:4},{value:"Direct use of libp2p protocols",id:"direct-use-of-libp2p-protocols",level:4},{value:"Transports",id:"transports",level:4},{value:"Discovery Domain",id:"discovery-domain",level:3},{value:"Discovery Methods",id:"discovery-methods",level:4},{value:"Use of ENR",id:"use-of-enr",level:4},{value:"Request/Response Domain",id:"requestresponse-domain",level:3},{value:"Historical Message Support",id:"historical-message-support",level:4},{value:"Content Filtering",id:"content-filtering",level:4},{value:"LightPush",id:"lightpush",level:4},{value:"Other Protocols",id:"other-protocols",level:4},{value:"Overview of Protocol Interaction",id:"overview-of-protocol-interaction",level:3},{value:"Appendix A: Upgradability and Compatibility",id:"appendix-a-upgradability-and-compatibility",level:2},{value:"Compatibility with Waku Legacy",id:"compatibility-with-waku-legacy",level:3},{value:"Appendix B: Security",id:"appendix-b-security",level:2},{value:"Primary Adversarial Model",id:"primary-adversarial-model",level:3},{value:"Security Features",id:"security-features",level:3},{value:"Pseudonymity",id:"pseudonymity",level:4},{value:"Anonymity / Unlinkability",id:"anonymity--unlinkability",level:4},{value:"Spam protection",id:"spam-protection",level:4},{value:"Data confidentiality, Integrity, and Authenticity",id:"data-confidentiality-integrity-and-authenticity",level:4},{value:"Security Considerations",id:"security-considerations",level:3},{value:"Appendix C: Implementation Notes",id:"appendix-c-implementation-notes",level:2},{value:"Implementation Matrix",id:"implementation-matrix",level:3},{value:"Recommendations for Clients",id:"recommendations-for-clients",level:3},{value:"Appendix D: Future work",id:"appendix-d-future-work",level:2},{value:"Copyright",id:"copyright",level:2},{value:"References",id:"references",level:2}],d={toc:p};function u(e){let{components:t,...i}=e;return(0,r.kt)("wrapper",(0,n.Z)({},d,i,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Status: draft"),(0,r.kt)("li",{parentName:"ul"},"Editor: Hanno Cornelius ","<",(0,r.kt)("a",{parentName:"li",href:"mailto:hanno@status.im"},"hanno@status.im"),">"),(0,r.kt)("li",{parentName:"ul"},"Contributors:",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"Sanaz Taheri ","<",(0,r.kt)("a",{parentName:"li",href:"mailto:sanaz@status.im"},"sanaz@status.im"),">"),(0,r.kt)("li",{parentName:"ul"},"Hanno Cornelius ","<",(0,r.kt)("a",{parentName:"li",href:"mailto:hanno@status.im"},"hanno@status.im"),">"),(0,r.kt)("li",{parentName:"ul"},"Reeshav Khan ","<",(0,r.kt)("a",{parentName:"li",href:"mailto:reeshav@status.im"},"reeshav@status.im"),">"),(0,r.kt)("li",{parentName:"ul"},"Daniel Kaiser ","<",(0,r.kt)("a",{parentName:"li",href:"mailto:danielkaiser@status.im"},"danielkaiser@status.im"),">"),(0,r.kt)("li",{parentName:"ul"},"Oskar Thor\xe9n ","<",(0,r.kt)("a",{parentName:"li",href:"mailto:oskarth@titanproxy.com"},"oskarth@titanproxy.com"),">")))),(0,r.kt)("h2",{id:"abstract"},"Abstract"),(0,r.kt)("p",null,"Waku is a family of modular peer-to-peer protocols for secure communication.\nThe protocols are designed to be secure, privacy-preserving, censorship-resistant\nand being able to run in resource-restricted environments.\nAt a high level, it implements Pub/Sub over ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/libp2p/specs"},"libp2p"),"\nand adds a set of capabilities to it.\nThese capabilities are things such as:\n(i) retrieving historical messages for mostly-offline devices\n(ii) adaptive nodes, allowing for heterogeneous nodes to contribute to the network\n(iii) preserving bandwidth usage for resource-restriced devices"),(0,r.kt)("p",null,"This makes Waku ideal for running a p2p protocol on mobile devices and\nother similar restricted environments."),(0,r.kt)("p",null,"Historically, it has its roots in ",(0,r.kt)("a",{parentName:"p",href:"/waku/standards/legacy/6/waku1"},"6/WAKU1"),",\nwhich stems from ",(0,r.kt)("a",{parentName:"p",href:"https://eips.ethereum.org/EIPS/eip-627"},"Whisper"),",\noriginally part of the Ethereum stack.\nHowever, Waku acts more as a thin wrapper for Pub/Sub and has a different API.\nIt is implemented in an iterative manner where initial focus\nis on porting essential functionality to libp2p.\nSee ",(0,r.kt)("a",{parentName:"p",href:"https://vac.dev/waku-v2-plan"},"rough road map (2020)")," for more historical context."),(0,r.kt)("h2",{id:"motivation-and-goals"},"Motivation and Goals"),(0,r.kt)("p",null,"Waku, as a family of protocols, is designed to have a set of properties\nthat are useful for many applications:"),(0,r.kt)("p",null,"1.",(0,r.kt)("strong",{parentName:"p"},"Useful for generalized messaging.")),(0,r.kt)("p",null,"Many applications require some form of messaging protocol to communicate\nbetween different subsystems or different nodes.\nThis messaging can be human-to-human, machine-to-machine or a mix.\nWaku is designed to work for all these scenarios."),(0,r.kt)("p",null,"2.",(0,r.kt)("strong",{parentName:"p"},"Peer-to-peer.")),(0,r.kt)("p",null,"Applications sometimes have requirements that make them suitable\nfor peer-to-peer solutions:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Censorship-resistant with no single point of failure"),(0,r.kt)("li",{parentName:"ul"},"Adaptive and scalable network"),(0,r.kt)("li",{parentName:"ul"},"Shared infrastructure")),(0,r.kt)("p",null,"3.",(0,r.kt)("strong",{parentName:"p"},"Runs anywhere.")),(0,r.kt)("p",null,"Applications often run in restricted environments,\nwhere resources or the environment is restricted in some fashion.\nFor example:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Limited bandwidth, CPU, memory, disk, battery, etc."),(0,r.kt)("li",{parentName:"ul"},"Not being publicly connectable"),(0,r.kt)("li",{parentName:"ul"},"Only being intermittently connected; mostly-offline")),(0,r.kt)("p",null,"4.",(0,r.kt)("strong",{parentName:"p"},"Privacy-preserving.")),(0,r.kt)("p",null," Applications often have a desire for some privacy guarantees, such as:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Pseudonymity and not being tied to any personally identifiable information (PII)"),(0,r.kt)("li",{parentName:"ul"},"Metadata protection in transit"),(0,r.kt)("li",{parentName:"ul"},"Various forms of unlinkability, etc.")),(0,r.kt)("p",null,"5.",(0,r.kt)("strong",{parentName:"p"},"Modular design.")),(0,r.kt)("p",null,"Applications often have different trade-offs when it comes to what properties they\nand their users value.\nWaku is designed in a modular fashion where an application protocol or\nnode can choose what protocols they run.\nWe call this concept ",(0,r.kt)("em",{parentName:"p"},"adaptive nodes"),"."),(0,r.kt)("p",null,"For example:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Resource usage vs metadata protection"),(0,r.kt)("li",{parentName:"ul"},"Providing useful services to the network vs mostly using it"),(0,r.kt)("li",{parentName:"ul"},"Stronger guarantees for spam protection vs economic registration cost")),(0,r.kt)("p",null,"For more on the concept of adaptive nodes and what this means in practice,\nplease see the ",(0,r.kt)("a",{parentName:"p",href:"/waku/informational/30/adaptive-nodes"},"30/ADAPTIVE-NODES")," spec."),(0,r.kt)("h2",{id:"specification"},"Specification"),(0,r.kt)("p",null,"The keywords \u201cMUST\u201d, \u201cMUST NOT\u201d, \u201cREQUIRED\u201d, \u201cSHALL\u201d, \u201cSHALL NOT\u201d,\n\u201cSHOULD\u201d, \u201cSHOULD NOT\u201d, \u201cRECOMMENDED\u201d, \u201cMAY\u201d, and\n\u201cOPTIONAL\u201d in this document are to be interpreted as described in ",(0,r.kt)("a",{parentName:"p",href:"https://www.ietf.org/rfc/rfc2119.txt"},"2119"),"."),(0,r.kt)("h3",{id:"network-interaction-domains"},"Network Interaction Domains"),(0,r.kt)("p",null,"While Waku is best thought of as a single cohesive thing,\nthere are three network interaction domains:"),(0,r.kt)("p",null,"(a) gossip domain\n(b) discovery domain\n(c) request/response domain"),(0,r.kt)("h4",{id:"protocols-and-identifiers"},"Protocols and Identifiers"),(0,r.kt)("p",null,"Since Waku is built on top of libp2p, many protocols have a libp2p protocol identifier.\nThe current main ",(0,r.kt)("a",{parentName:"p",href:"https://docs.libp2p.io/concepts/protocols/"},"protocol identifiers"),"\nare:"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("inlineCode",{parentName:"li"},"/vac/waku/relay/2.0.0")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("inlineCode",{parentName:"li"},"/vac/waku/store-query/3.0.0")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("inlineCode",{parentName:"li"},"/vac/waku/filter/2.0.0-beta1")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("inlineCode",{parentName:"li"},"/vac/waku/lightpush/2.0.0-beta1"))),(0,r.kt)("p",null,"This is in addition to protocols that specify messages, payloads, and\nrecommended usages.\nSince these aren't negotiated libp2p protocols,\nthey are referred to by their RFC ID.\nFor example:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"/waku/standards/core/14/message"},"14/WAKU2-MESSAGE")," and\n",(0,r.kt)("a",{parentName:"li",href:"/waku/standards/application/26/payload"},"26/WAKU-PAYLOAD")," for message payloads"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"/waku/informational/23/topics"},"23/WAKU2-TOPICS")," and\n",(0,r.kt)("a",{parentName:"li",href:"/waku/informational/27/peers"},"27/WAKU2-PEERS")," for recommendations around usage")),(0,r.kt)("p",null,"There are also more experimental libp2p protocols such as:"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("inlineCode",{parentName:"li"},"/vac/waku/waku-rln-relay/2.0.0-alpha1")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("inlineCode",{parentName:"li"},"/vac/waku/peer-exchange/2.0.0-alpha1"))),(0,r.kt)("p",null,"The semantics of these protocols are referred to by RFC ID ",(0,r.kt)("a",{parentName:"p",href:"/waku/standards/core/17/rln-relay"},"17/WAKU2-RLN-RELAY")," and ",(0,r.kt)("a",{parentName:"p",href:"/waku/standards/core/34/peer-exchange"},"34/WAKU2-PEER-EXCHANGE"),"."),(0,r.kt)("h4",{id:"use-of-libp2p-and-protobuf"},"Use of libp2p and Protobuf"),(0,r.kt)("p",null,"Unless otherwise specified,\nall protocols are implemented over libp2p and use Protobuf by default.\nSince messages are exchanged over a ",(0,r.kt)("a",{parentName:"p",href:"https://docs.libp2p.io/concepts/protocols/"},"bi-directional binary stream"),",\nas a convention,\nlibp2p protocols prefix binary message payloads with\nthe length of the message in bytes.\nThis length integer is encoded as a ",(0,r.kt)("a",{parentName:"p",href:"https://developers.google.com/protocol-buffers/docs/encoding#varints"},"protobuf varint"),"."),(0,r.kt)("h4",{id:"gossip-domain"},"Gossip Domain"),(0,r.kt)("p",null,"Waku is using gossiping to disseminate messages throughout the network."),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Protocol identifier"),": ",(0,r.kt)("inlineCode",{parentName:"p"},"/vac/waku/relay/2.0.0")),(0,r.kt)("p",null,"See ",(0,r.kt)("a",{parentName:"p",href:"/waku/standards/core/11/relay"},"11/WAKU2-RELAY")," specification for more details."),(0,r.kt)("p",null,"For an experimental privacy-preserving economic spam protection mechanism,\nsee ",(0,r.kt)("a",{parentName:"p",href:"/waku/standards/core/17/rln-relay"},"17/WAKU2-RLN-RELAY"),"."),(0,r.kt)("p",null,"See ",(0,r.kt)("a",{parentName:"p",href:"/waku/informational/23/topics"},"23/WAKU2-TOPICS"),"\nfor more information about the recommended topic usage."),(0,r.kt)("h4",{id:"direct-use-of-libp2p-protocols"},"Direct use of libp2p protocols"),(0,r.kt)("p",null,"In addition to ",(0,r.kt)("inlineCode",{parentName:"p"},"/vac/waku/*")," protocols,\nWaku MAY directly use the following libp2p protocols:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://docs.libp2p.io/concepts/protocols/#ping"},"libp2p ping protocol"),"\nwith protocol id")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-text"},"/ipfs/ping/1.0.0\n")),(0,r.kt)("p",null,"for liveness checks between peers, or\nto keep peer-to-peer connections alive."),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://docs.libp2p.io/concepts/protocols/#identify"},"libp2p identity and identity/push"),"\nwith protocol IDs")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-text"},"/ipfs/id/1.0.0\n")),(0,r.kt)("p",null,"and"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-text"},"/ipfs/id/push/1.0.0\n")),(0,r.kt)("p",null,"respectively, as basic means for capability discovery.\nThese protocols are anyway used by the libp2p connection\nestablishment layer Waku is built on.\nWe plan to introduce a new Vac capability discovery protocol\nwith better anonymity properties and more functionality."),(0,r.kt)("h4",{id:"transports"},"Transports"),(0,r.kt)("p",null,"Waku is built in top of libp2p, and like libp2p it strives to be transport agnostic.\nWe define a set of recommended transports in order to achieve a baseline of\ninteroperability between clients.\nThis section describes these recommended transports."),(0,r.kt)("p",null,"Waku client implementations SHOULD support the TCP transport.\nWhere TCP is supported it MUST be enabled for both dialing and listening,\neven if other transports are available."),(0,r.kt)("p",null,"Waku nodes running in environments that do not allow the use of TCP directly,\nMAY use other transports."),(0,r.kt)("p",null,"A Waku node SHOULD support secure websockets for bidirectional communication streams,\nfor example in a web browser context."),(0,r.kt)("p",null,"A node MAY support unsecure websockets if required by the application or\nrunning environment."),(0,r.kt)("h3",{id:"discovery-domain"},"Discovery Domain"),(0,r.kt)("h4",{id:"discovery-methods"},"Discovery Methods"),(0,r.kt)("p",null,"Waku can retrieve a list of nodes to connect to using DNS-based discovery\nas per ",(0,r.kt)("a",{parentName:"p",href:"https://eips.ethereum.org/EIPS/eip-1459"},"EIP-1459"),".\nWhile this is a useful way of bootstrapping connection to a set of peers,\nit MAY be used in conjunction with an ",(0,r.kt)("a",{parentName:"p",href:"https://docs.libp2p.io/concepts/publish-subscribe/#discovery"},"ambient peer discovery"),"\nprocedure to find other nodes to connect to,\nsuch as ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/ethereum/devp2p/blob/8fd5f7e1c1ec496a9d8dc1640a8548b8a8b5986b/discv5/discv5.md"},"Node Discovery v5"),".\nIt is possible to bypass the discovery domain by specifying static nodes."),(0,r.kt)("h4",{id:"use-of-enr"},"Use of ENR"),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"https://github.com/waku-org/specs/blob/master/standards/core/enr.md"},"WAKU2-ENR"),"\ndescribes the usage of ",(0,r.kt)("a",{parentName:"p",href:"https://eips.ethereum.org/EIPS/eip-778"},"EIP-778 ENR (Ethereum Node Records)"),"\nfor Waku discovery purposes.\nIt introduces two new ENR fields, ",(0,r.kt)("inlineCode",{parentName:"p"},"multiaddrs")," and\n",(0,r.kt)("inlineCode",{parentName:"p"},"waku2"),", that a Waku node MAY use for discovery purposes.\nThese fields MUST be used under certain conditions, as set out in the specification.\nBoth EIP-1459 DNS-based discovery and Node Discovery v5 operate on ENR,\nand it's reasonable to expect even wider utility for ENR in Waku networks in the future."),(0,r.kt)("h3",{id:"requestresponse-domain"},"Request/Response Domain"),(0,r.kt)("p",null,"In addition to the Gossip domain,\nWaku provides a set of request/response protocols.\nThey are primarily used in order to get Waku to run in resource restricted environments,\nsuch as low bandwidth or being mostly offline."),(0,r.kt)("h4",{id:"historical-message-support"},"Historical Message Support"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Protocol identifier*"),": ",(0,r.kt)("inlineCode",{parentName:"p"},"/vac/waku/store-query/3.0.0")),(0,r.kt)("p",null,"This is used to fetch historical messages for mostly offline devices.\nSee ",(0,r.kt)("a",{parentName:"p",href:"/waku/standards/core/13/store"},"13/WAKU2-STORE spec")," specification for more details."),(0,r.kt)("p",null,"There is also an experimental fault-tolerant addition to the store protocol\nthat relaxes the high availability requirement.\nSee ",(0,r.kt)("a",{parentName:"p",href:"/waku/standards/application/21/fault-tolerant-store"},"21/WAKU2-FAULT-TOLERANT-STORE")),(0,r.kt)("h4",{id:"content-filtering"},"Content Filtering"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Protocol identifier*"),": ",(0,r.kt)("inlineCode",{parentName:"p"},"/vac/waku/filter/2.0.0-beta1")),(0,r.kt)("p",null,"This is used to preserve more bandwidth when fetching a subset of messages.\nSee ",(0,r.kt)("a",{parentName:"p",href:"/waku/standards/core/12/filter"},"12/WAKU2-FILTER")," specification for more details."),(0,r.kt)("h4",{id:"lightpush"},"LightPush"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Protocol identifier*"),": ",(0,r.kt)("inlineCode",{parentName:"p"},"/vac/waku/lightpush/2.0.0-beta1")),(0,r.kt)("p",null,"This is used for nodes with short connection windows and\nlimited bandwidth to publish messages into the Waku network.\nSee ",(0,r.kt)("a",{parentName:"p",href:"/waku/standards/core/19/lightpush"},"19/WAKU2-LIGHTPUSH")," specification for more details."),(0,r.kt)("h4",{id:"other-protocols"},"Other Protocols"),(0,r.kt)("p",null,"The above is a non-exhaustive list,\nand due to the modular design of Waku,\nthere may be other protocols here that provide a useful service to the Waku network."),(0,r.kt)("h3",{id:"overview-of-protocol-interaction"},"Overview of Protocol Interaction"),(0,r.kt)("p",null,"See the sequence diagram below for an overview of how different protocols interact."),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"Overview of how protocols interact in Waku.",src:a(41622).Z,width:"976",height:"687"})),(0,r.kt)("ol",{start:0},(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"We have six nodes, A-F.\nThe protocols initially mounted are indicated as such.\nThe PubSub topics ",(0,r.kt)("inlineCode",{parentName:"p"},"pubtopic1")," and\n",(0,r.kt)("inlineCode",{parentName:"p"},"pubtopic2")," is used for routing and\nindicates that it is subscribed to messages on that topic for relay,\nsee ",(0,r.kt)("a",{parentName:"p",href:"/waku/standards/core/11/relay"},"11/WAKU2-RELAY")," for details.\nDitto for ",(0,r.kt)("a",{parentName:"p",href:"/waku/standards/core/13/store"},"13/WAKU2-STORE"),"\nwhere it indicates that these messages are persisted on that node.")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Node A creates a WakuMessage ",(0,r.kt)("inlineCode",{parentName:"p"},"msg1")," with a ContentTopic ",(0,r.kt)("inlineCode",{parentName:"p"},"contentTopic1"),".\nSee ",(0,r.kt)("a",{parentName:"p",href:"/waku/standards/core/14/message"},"14/WAKU2-MESSAGE")," for more details.\nIf WakuMessage version is set to 1,\nwe use the ",(0,r.kt)("a",{parentName:"p",href:"/waku/standards/legacy/6/waku1"},"6/WAKU1")," compatible ",(0,r.kt)("inlineCode",{parentName:"p"},"data")," field with encryption.\nSee ",(0,r.kt)("a",{parentName:"p",href:"/waku/standards/legacy/7/data"},"7/WAKU-DATA")," for more details.")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Node F requests to get messages filtered by PubSub topic ",(0,r.kt)("inlineCode",{parentName:"p"},"pubtopic1")," and\nContentTopic ",(0,r.kt)("inlineCode",{parentName:"p"},"contentTopic1"),".\nNode D subscribes F to this filter and\nwill in the future forward messages that match that filter.\nSee ",(0,r.kt)("a",{parentName:"p",href:"/waku/standards/core/12/filter"},"12/WAKU2-FILTER")," for more details.")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Node A publishes ",(0,r.kt)("inlineCode",{parentName:"p"},"msg1")," on ",(0,r.kt)("inlineCode",{parentName:"p"},"pubtopic1")," and\nsubscribes to that relay topic.\nIt then gets relayed further from B to D, but\nnot C since it doesn't subscribe to that topic.\nSee ",(0,r.kt)("a",{parentName:"p",href:"/waku/standards/core/11/relay"},"11/WAKU2-RELAY"),".")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Node D saves ",(0,r.kt)("inlineCode",{parentName:"p"},"msg1")," for possible later retrieval by other nodes.\nSee ",(0,r.kt)("a",{parentName:"p",href:"/waku/standards/core/13/store"},"13/WAKU2-STORE"),".")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Node D also pushes ",(0,r.kt)("inlineCode",{parentName:"p"},"msg1")," to F,\nas it has previously subscribed F to this filter.\nSee ",(0,r.kt)("a",{parentName:"p",href:"/waku/standards/core/12/filter"},"12/WAKU2-FILTER"),".")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"At a later time, Node E comes online.\nIt then requests messages matching ",(0,r.kt)("inlineCode",{parentName:"p"},"pubtopic1")," and\n",(0,r.kt)("inlineCode",{parentName:"p"},"contentTopic1")," from Node D.\nNode D responds with messages meeting this (and possibly other) criteria.\nSee ",(0,r.kt)("a",{parentName:"p",href:"/waku/standards/core/13/store"},"13/WAKU2-STORE"),"."))),(0,r.kt)("h2",{id:"appendix-a-upgradability-and-compatibility"},"Appendix A: Upgradability and Compatibility"),(0,r.kt)("h3",{id:"compatibility-with-waku-legacy"},"Compatibility with Waku Legacy"),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"/waku/standards/legacy/6/waku1"},"6/WAKU1")," and Waku are different protocols all together.\nThey use a different transport protocol underneath;\n",(0,r.kt)("a",{parentName:"p",href:"/waku/standards/legacy/6/waku1"},"6/WAKU1")," is devp2p RLPx based while Waku uses libp2p.\nThe protocols themselves also differ as does their data format.\nCompatibility can be achieved only by using a bridge\nthat not only talks both devp2p RLPx and libp2p,\nbut that also transfers (partially) the content of a packet from one version\nto the other."),(0,r.kt)("p",null,"See ",(0,r.kt)("a",{parentName:"p",href:"/waku/standards/core/15/bridge"},"15/WAKU-BRIDGE")," for details on a bidirectional bridge mode."),(0,r.kt)("h2",{id:"appendix-b-security"},"Appendix B: Security"),(0,r.kt)("p",null,"Each protocol layer of Waku provides a distinct service and\nis associated with a separate set of security features and concerns.\nTherefore, the overall security of Waku\ndepends on how the different layers are utilized.\nIn this section,\nwe overview the security properties of Waku protocols\nagainst a static adversarial model which is described below.\nNote that a more detailed security analysis of each Waku protocol\nis supplied in its respective specification as well."),(0,r.kt)("h3",{id:"primary-adversarial-model"},"Primary Adversarial Model"),(0,r.kt)("p",null,"In the primary adversarial model,\nwe consider adversary as a passive entity that attempts to collect information\nfrom others to conduct an attack,\nbut it does so without violating protocol definitions and instructions."),(0,r.kt)("p",null,"The following are ",(0,r.kt)("strong",{parentName:"p"},"not")," considered as part of the adversarial model:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"An adversary with a global view of all the peers and their connections."),(0,r.kt)("li",{parentName:"ul"},"An adversary that can eavesdrop on communication links\nbetween arbitrary pairs of peers\n(unless the adversary is one end of the communication).\nSpecifically, the communication channels are assumed to be secure.")),(0,r.kt)("h3",{id:"security-features"},"Security Features"),(0,r.kt)("h4",{id:"pseudonymity"},"Pseudonymity"),(0,r.kt)("p",null,"Waku by default guarantees pseudonymity for all of the protocol layers\nsince parties do not have to disclose their true identity\nand instead they utilize libp2p ",(0,r.kt)("inlineCode",{parentName:"p"},"PeerID")," as their identifiers.\nWhile pseudonymity is an appealing security feature,\nit does not guarantee full anonymity since the actions taken under the same pseudonym\ni.e., ",(0,r.kt)("inlineCode",{parentName:"p"},"PeerID")," can be linked together and\npotentially result in the re-identification of the true actor."),(0,r.kt)("h4",{id:"anonymity--unlinkability"},"Anonymity / Unlinkability"),(0,r.kt)("p",null,"At a high level,\nanonymity is the inability of an adversary in linking an actor\nto its data/performed action (the actor and action are context-dependent).\nTo be precise about linkability,\nwe use the term Personally Identifiable Information (PII)\nto refer to any piece of data that could potentially\nbe used to uniquely identify a party.\nFor example, the signature verification key, and\nthe hash of one's static IP address are unique for each user and\nhence count as PII.\nNotice that users' actions can be traced through their PIIs\n(e.g., signatures) and hence result in their re-identification risk.\nAs such, we seek anonymity by avoiding linkability between actions and\nthe actors / actors' PII. Concerning anonymity, Waku provides the following features:"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Publisher-Message Unlinkability"),":\nThis feature signifies the unlinkability of a publisher\nto its published messages in the 11/WAKU2-RELAY protocol.\nThe ",(0,r.kt)("a",{parentName:"p",href:"/waku/standards/core/11/relay#security-analysis"},"Publisher-Message Unlinkability"),"\nis enforced through the ",(0,r.kt)("inlineCode",{parentName:"p"},"StrictNoSign")," policy due to which the data fields\nof pubsub messages that count as PII for the publisher must be left unspecified."),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Subscriber-Topic Unlinkability"),":\nThis feature stands for the unlinkability of the subscriber\nto its subscribed topics in the 11/WAKU2-RELAY protocol.\nThe ",(0,r.kt)("a",{parentName:"p",href:"/waku/standards/core/11/relay#security-analysis"},"Subscriber-Topic Unlinkability"),"\nis achieved through the utilization of a single PubSub topic.\nAs such, subscribers are not re-identifiable from their subscribed topic IDs\nas the entire network is linked to the same topic ID.\nThis level of unlinkability / anonymity is known as ",(0,r.kt)("a",{parentName:"p",href:"https://www.privitar.com/blog/k-anonymity-an-introduction/"},"k-anonymity"),"\nwhere k is proportional to the system size (number of subscribers).\nNote that there is no hard limit on the number of the pubsub topics, however,\nthe use of one topic is recommended for the sake of anonymity."),(0,r.kt)("h4",{id:"spam-protection"},"Spam protection"),(0,r.kt)("p",null,"This property indicates that no adversary can flood the system\n(i.e., publishing a large number of messages in a short amount of time),\neither accidentally or deliberately, with any kind of message\ni.e. even if the message content is valid or useful.\nSpam protection is partly provided in ",(0,r.kt)("inlineCode",{parentName:"p"},"11/WAKU2-RELAY"),"\nthrough the ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/libp2p/specs/blob/master/pubsub/gossipsub/gossipsub-v1.1.md#spam-protection-measures"},"scoring mechanism"),"\nprovided for by GossipSub v1.1.\nAt a high level,\npeers utilize a scoring function to locally score the behavior\nof their connections and remove peers with a low score."),(0,r.kt)("h4",{id:"data-confidentiality-integrity-and-authenticity"},"Data confidentiality, Integrity, and Authenticity"),(0,r.kt)("p",null,"Confidentiality can be addressed through data encryption whereas integrity and\nauthenticity are achievable through digital signatures.\nThese features are provided for in ",(0,r.kt)("a",{parentName:"p",href:"/waku/standards/core/14/message#version-1"},"14/WAKU2-MESSAGE (version 1)"),"`\nthrough payload encryption as well as encrypted signatures."),(0,r.kt)("h3",{id:"security-considerations"},"Security Considerations"),(0,r.kt)("p",null,"Lack of anonymity/unlinkability in the protocols involving direct connections\nincluding ",(0,r.kt)("inlineCode",{parentName:"p"},"13/WAKU2-STORE")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"12/WAKU2-FILTER")," protocols:"),(0,r.kt)("p",null,"The anonymity/unlinkability is not guaranteed in the protocols like ",(0,r.kt)("inlineCode",{parentName:"p"},"13/WAKU2-STORE"),"\nand ",(0,r.kt)("inlineCode",{parentName:"p"},"12/WAKU2-FILTER")," where peers need to have direct connections\nto benefit from the designated service.\nThis is because during the direct connections peers utilize ",(0,r.kt)("inlineCode",{parentName:"p"},"PeerID"),"\nto identify each other,\ntherefore the service obtained in the protocol is linkable\nto the beneficiary's ",(0,r.kt)("inlineCode",{parentName:"p"},"PeerID")," (which counts as PII).\nFor ",(0,r.kt)("inlineCode",{parentName:"p"},"13/WAKU2-STORE"),",\nthe queried node would be able to link the querying node's ",(0,r.kt)("inlineCode",{parentName:"p"},"PeerID"),"\nto its queried topics.\nLikewise, in the ",(0,r.kt)("inlineCode",{parentName:"p"},"12/WAKU2-FILTER"),",\na full node can link the light node's ",(0,r.kt)("inlineCode",{parentName:"p"},"PeerID"),"s to its content filter."),(0,r.kt)("h2",{id:"appendix-c-implementation-notes"},"Appendix C: Implementation Notes"),(0,r.kt)("h3",{id:"implementation-matrix"},"Implementation Matrix"),(0,r.kt)("p",null,"There are multiple implementations of Waku and its protocols:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://github.com/status-im/nim-waku/"},"nim-waku (Nim)")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://github.com/status-im/go-waku/"},"go-waku (Go)")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://github.com/status-im/js-waku/"},"js-waku (NodeJS and Browser)"))),(0,r.kt)("p",null,"Below you can find an overview of the specifications that they implement\nas they relate to Waku.\nThis includes Waku legacy specifications, as they are used for bridging between the two networks."),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Spec"),(0,r.kt)("th",{parentName:"tr",align:null},"nim-waku (Nim)"),(0,r.kt)("th",{parentName:"tr",align:null},"go-waku (Go)"),(0,r.kt)("th",{parentName:"tr",align:null},"js-waku (Node JS)"),(0,r.kt)("th",{parentName:"tr",align:null},"js-waku (Browser JS)"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("a",{parentName:"td",href:"/waku/standards/legacy/6/waku1"},"6/WAKU1")),(0,r.kt)("td",{parentName:"tr",align:null},"\u2714"),(0,r.kt)("td",{parentName:"tr",align:null}),(0,r.kt)("td",{parentName:"tr",align:null}),(0,r.kt)("td",{parentName:"tr",align:null})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("a",{parentName:"td",href:"/waku/standards/legacy/7/data"},"7/WAKU-DATA")),(0,r.kt)("td",{parentName:"tr",align:null},"\u2714"),(0,r.kt)("td",{parentName:"tr",align:null},"\u2714"),(0,r.kt)("td",{parentName:"tr",align:null}),(0,r.kt)("td",{parentName:"tr",align:null})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("a",{parentName:"td",href:"/waku/standards/legacy/8/mail"},"8/WAKU-MAIL")),(0,r.kt)("td",{parentName:"tr",align:null},"\u2714"),(0,r.kt)("td",{parentName:"tr",align:null}),(0,r.kt)("td",{parentName:"tr",align:null}),(0,r.kt)("td",{parentName:"tr",align:null})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("a",{parentName:"td",href:"/waku/standards/legacy/9/rpc"},"9/WAKU-RPC")),(0,r.kt)("td",{parentName:"tr",align:null},"\u2714"),(0,r.kt)("td",{parentName:"tr",align:null}),(0,r.kt)("td",{parentName:"tr",align:null}),(0,r.kt)("td",{parentName:"tr",align:null})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("a",{parentName:"td",href:"/waku/standards/core/10/waku2"},"10/WAKU2")),(0,r.kt)("td",{parentName:"tr",align:null},"\u2714"),(0,r.kt)("td",{parentName:"tr",align:null},"\ud83d\udea7"),(0,r.kt)("td",{parentName:"tr",align:null},"\ud83d\udea7"),(0,r.kt)("td",{parentName:"tr",align:null},"\u2714")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("a",{parentName:"td",href:"/waku/standards/core/11/relay"},"11/WAKU2-RELAY")),(0,r.kt)("td",{parentName:"tr",align:null},"\u2714"),(0,r.kt)("td",{parentName:"tr",align:null},"\u2714"),(0,r.kt)("td",{parentName:"tr",align:null},"\u2714"),(0,r.kt)("td",{parentName:"tr",align:null},"\u2714")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("a",{parentName:"td",href:"/waku/standards/core/12/filter"},"12/WAKU2-FILTER")),(0,r.kt)("td",{parentName:"tr",align:null},"\u2714"),(0,r.kt)("td",{parentName:"tr",align:null},"\u2714"),(0,r.kt)("td",{parentName:"tr",align:null}),(0,r.kt)("td",{parentName:"tr",align:null})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("a",{parentName:"td",href:"/waku/standards/core/13/store"},"13/WAKU2-STORE")),(0,r.kt)("td",{parentName:"tr",align:null},"\u2714"),(0,r.kt)("td",{parentName:"tr",align:null},"\u2714"),(0,r.kt)("td",{parentName:"tr",align:null},"\u2714","*"),(0,r.kt)("td",{parentName:"tr",align:null},"\u2714","*")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("a",{parentName:"td",href:"/waku/standards/core/14/message"},"14/WAKU2-MESSAGE"),")"),(0,r.kt)("td",{parentName:"tr",align:null},"\u2714"),(0,r.kt)("td",{parentName:"tr",align:null},"\u2714"),(0,r.kt)("td",{parentName:"tr",align:null},"\u2714"),(0,r.kt)("td",{parentName:"tr",align:null},"\u2714")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("a",{parentName:"td",href:"/waku/standards/core/15/bridge"},"15/WAKU2-BRIDGE")),(0,r.kt)("td",{parentName:"tr",align:null},"\u2714"),(0,r.kt)("td",{parentName:"tr",align:null}),(0,r.kt)("td",{parentName:"tr",align:null}),(0,r.kt)("td",{parentName:"tr",align:null})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("a",{parentName:"td",href:"/waku/deprecated/16/rpc"},"16/WAKU2-RPC")),(0,r.kt)("td",{parentName:"tr",align:null},"\u2714"),(0,r.kt)("td",{parentName:"tr",align:null}),(0,r.kt)("td",{parentName:"tr",align:null}),(0,r.kt)("td",{parentName:"tr",align:null})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("a",{parentName:"td",href:"/waku/standards/core/17/rln-relay"},"17/WAKU2-RLN-RELAY")),(0,r.kt)("td",{parentName:"tr",align:null},"\ud83d\udea7"),(0,r.kt)("td",{parentName:"tr",align:null}),(0,r.kt)("td",{parentName:"tr",align:null}),(0,r.kt)("td",{parentName:"tr",align:null})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("a",{parentName:"td",href:"/waku/standards/application/18/swap"},"18/WAKU2-SWAP")),(0,r.kt)("td",{parentName:"tr",align:null},"\ud83d\udea7"),(0,r.kt)("td",{parentName:"tr",align:null}),(0,r.kt)("td",{parentName:"tr",align:null}),(0,r.kt)("td",{parentName:"tr",align:null})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("a",{parentName:"td",href:"/waku/standards/core/19/lightpush"},"19/WAKU2-LIGHTPUSH")),(0,r.kt)("td",{parentName:"tr",align:null},"\u2714"),(0,r.kt)("td",{parentName:"tr",align:null},"\u2714"),(0,r.kt)("td",{parentName:"tr",align:null},"\u2714","*","*"),(0,r.kt)("td",{parentName:"tr",align:null},"\u2714","*","*")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("a",{parentName:"td",href:"/waku/standards/application/21/fault-tolerant-store"},"21/WAKU2-FAULT-TOLERANT-STORE")),(0,r.kt)("td",{parentName:"tr",align:null},"\u2714"),(0,r.kt)("td",{parentName:"tr",align:null},"\u2714"),(0,r.kt)("td",{parentName:"tr",align:null}),(0,r.kt)("td",{parentName:"tr",align:null})))),(0,r.kt)("p",null,"*js-waku implements ",(0,r.kt)("a",{parentName:"p",href:"/waku/standards/core/13/store"},"13/WAKU2-STORE")," as a querying node only.\n**js-waku only implements ",(0,r.kt)("a",{parentName:"p",href:"/waku/standards/core/19/lightpush"},"19/WAKU2-LIGHTPUSH")," requests."),(0,r.kt)("h3",{id:"recommendations-for-clients"},"Recommendations for Clients"),(0,r.kt)("p",null,"To implement a minimal Waku client,\nwe recommend implementing the following subset in the following order:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"/waku/standards/core/10/waku2"},"10/WAKU2")," - this specification"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"/waku/standards/core/11/relay"},"11/WAKU2-RELAY")," - for basic operation"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"/waku/standards/core/14/message"},"14/WAKU2-MESSAGE")," - version 0 (unencrypted)"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"/waku/standards/core/13/store"},"13/WAKU2-STORE")," - for historical messaging (query mode only)")),(0,r.kt)("p",null,"To get compatibility with Waku Legacy:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"/waku/standards/legacy/7/data"},"7/WAKU-DATA")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"/waku/standards/14/message"},"14/WAKU2-MESSAGE")," - version 1 (encrypted with ",(0,r.kt)("inlineCode",{parentName:"li"},"7/WAKU-DATA"),")")),(0,r.kt)("p",null,"For an interoperable keep-alive mechanism:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://docs.libp2p.io/concepts/protocols/#ping"},"libp2p ping protocol"),",\nwith periodic pings to connected peers")),(0,r.kt)("h2",{id:"appendix-d-future-work"},"Appendix D: Future work"),(0,r.kt)("p",null,"The following features are currently experimental,\nunder research and initial implementations:"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Economic Spam Resistance"),":"),(0,r.kt)("p",null,"We aim to enable an incentivized spam protection technique\nto enhance ",(0,r.kt)("inlineCode",{parentName:"p"},"11/WAKU2-RELAY")," by using rate limiting nullifiers.\nMore details on this can be found in ",(0,r.kt)("a",{parentName:"p",href:"/waku/standards/core/17/rln-relay"},"17/WAKU2-RLN-RELAY"),".\nIn this advanced method,\npeers are limited to a certain rate of messaging per epoch and\nan immediate financial penalty is enforced for spammers who break this rate."),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Prevention of Denial of Service (DoS) and Node Incentivization"),":\nDenial of service signifies the case where an adversarial node\nexhausts another node's service capacity (e.g., by making a large number of requests)\nand makes it unavailable to the rest of the system.\nDoS attack is to be mitigated through the accounting model as described in ",(0,r.kt)("a",{parentName:"p",href:"/waku/deprecated/18/swap"},"18/WAKU2-SWAP"),".\nIn a nutshell, peers have to pay for the service they obtain from each other.\nIn addition to incentivizing the service provider,\naccounting also makes DoS attacks costly for malicious peers.\nThe accounting model can be used in ",(0,r.kt)("inlineCode",{parentName:"p"},"13/WAKU2-STORE")," and\n",(0,r.kt)("inlineCode",{parentName:"p"},"12/WAKU2-FILTER")," to protect against DoS attacks."),(0,r.kt)("p",null,"Additionally, this gives node operators who provide a useful service to the network\nan incentive to perform that service.\nSee ",(0,r.kt)("a",{parentName:"p",href:"/waku/deprecated/18/swap"},"18/WAKU2-SWAP"),"\nfor more details on this piece of work."),(0,r.kt)("h2",{id:"copyright"},"Copyright"),(0,r.kt)("p",null,"Copyright and related rights waived via ",(0,r.kt)("a",{parentName:"p",href:"https://creativecommons.org/publicdomain/zero/1.0/"},"CC0"),"."),(0,r.kt)("h2",{id:"references"},"References"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("a",{parentName:"p",href:"https://github.com/libp2p/specs"},"libp2p specs"))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("a",{parentName:"p",href:"/waku/standards/legacy/6/waku1"},"6/WAKU1"))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("a",{parentName:"p",href:"https://eips.ethereum.org/EIPS/eip-627"},"Whisper spec (EIP627)"))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("a",{parentName:"p",href:"https://vac.dev/waku-v2-plan"},"Waku v2 plan"))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("a",{parentName:"p",href:"/waku/informational/30/adaptive-nodes"},"30/ADAPTIVE-NODES"))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("a",{parentName:"p",href:"https://docs.libp2p.io/concepts/protocols/"},"Protocol Identifiers"))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("a",{parentName:"p",href:"/waku/standards/core/14/message"},"14/WAKU2-MESSAGE"))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("a",{parentName:"p",href:"/waku/standards/application/26/payload"},"26/WAKU-PAYLOAD"))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("a",{parentName:"p",href:"/waku/informational/23/topics"},"23/WAKU2-TOPICS"))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("a",{parentName:"p",href:"/waku/informational/27/peers"},"27/WAKU2-PEERS"))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("a",{parentName:"p",href:"https://docs.libp2p.io/concepts/protocols/"},"bi-directional binary stream"))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("a",{parentName:"p",href:"https://developers.google.com/protocol-buffers/docs/encoding#varints"},"Protobuf varint encoding"))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("a",{parentName:"p",href:"/waku/standards/core/11/relay"},"11/WAKU2-RELAY spec"))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("a",{parentName:"p",href:"/waku/standards/core/17/rln-relay"},"17/WAKU2-RLN-RELAY"))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("a",{parentName:"p",href:"https://eips.ethereum.org/EIPS/eip-1459"},"EIP-1459"))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("a",{parentName:"p",href:"https://docs.libp2p.io/concepts/publish-subscribe/#discovery"},"Ambient peer discovery"))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("a",{parentName:"p",href:"https://github.com/ethereum/devp2p/blob/8fd5f7e1c1ec496a9d8dc1640a8548b8a8b5986b/discv5/discv5.md"},"Node Discovery v5"))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("a",{parentName:"p",href:"https://github.com/waku-org/specs/blob/master/standards/core/enr.md"},"WAKU2-ENR"))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("a",{parentName:"p",href:"https://eips.ethereum.org/EIPS/eip-778"},"EIP-778 ENR (Ethereum Node Records)"))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("a",{parentName:"p",href:"/waku/standards/core/13/store"},"13/WAKU2-STORE spec"))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("a",{parentName:"p",href:"/waku/standards/application/21/ft-store"},"21/WAKU2-FT-STORE"))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("a",{parentName:"p",href:"/waku/standards/core/12/filter"},"12/WAKU2-FILTER"))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("a",{parentName:"p",href:"/waku/standards/core/19/lightpush"},"19/WAKU2-LIGHTPUSH"))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("a",{parentName:"p",href:"/waku/standards/legacy/7/data"},"7/WAKU-DATA"))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("a",{parentName:"p",href:"/waku/standards/core/15/bridge"},"15/WAKU-BRIDGE"))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("a",{parentName:"p",href:"https://www.privitar.com/blog/k-anonymity-an-introduction/"},"k-anonymity"))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("a",{parentName:"p",href:"https://github.com/libp2p/specs/blob/master/pubsub/gossipsub/gossipsub-v1.1.md"},"GossipSub v1.1"))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("a",{parentName:"p",href:"https://github.com/status-im/nim-waku/"},"nim-waku (Nim)"))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("a",{parentName:"p",href:"https://github.com/status-im/go-waku/"},"go-waku (Go)"))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("a",{parentName:"p",href:"https://github.com/status-im/js-waku/"},"js-waku (NodeJS and Browser)"))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("a",{parentName:"p",href:"/waku/standards/legacy/8/mail"},"8/WAKU-MAIL"))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("a",{parentName:"p",href:"/waku/standards/legacy/9/rpc"},"9/WAKU-RPC"))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("a",{parentName:"p",href:"waku/deprecated/16/rpc"},"16/WAKU2-RPC"))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("a",{parentName:"p",href:"waku/deprecated/18/swap"},"18/WAKU2-SWAP spec"))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("a",{parentName:"p",href:"../../application/21/fault-tolerant-store"},"21/WAKU2-FAULT-TOLERANT-STORE")))))}u.isMDXComponent=!0},3905:(e,t,a)=>{a.d(t,{Zo:()=>d,kt:()=>c});var n=a(67294);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function i(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function o(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?i(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function l(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},i=Object.keys(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var s=n.createContext({}),p=function(e){var t=n.useContext(s),a=t;return e&&(a="function"==typeof e?e(t):o(o({},t),e)),a},d=function(e){var t=p(e.components);return n.createElement(s.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},m=n.forwardRef((function(e,t){var a=e.components,r=e.mdxType,i=e.originalType,s=e.parentName,d=l(e,["components","mdxType","originalType","parentName"]),m=p(a),c=r,k=m["".concat(s,".").concat(c)]||m[c]||u[c]||i;return a?n.createElement(k,o(o({ref:t},d),{},{components:a})):n.createElement(k,o({ref:t},d))}));function c(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=a.length,o=new Array(i);o[0]=m;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l.mdxType="string"==typeof e?e:r,o[1]=l;for(var p=2;p<i;p++)o[p]=a[p];return n.createElement.apply(null,o)}return n.createElement.apply(null,a)}m.displayName="MDXCreateElement"},41622:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/overview-ee0a87b0c5a5083885a7896cadf11d88.png"}}]);