"use strict";(self.webpackChunklogos_docs_template=self.webpackChunklogos_docs_template||[]).push([[6470],{96866:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>s,contentTitle:()=>i,default:()=>u,frontMatter:()=>l,metadata:()=>o,toc:()=>p});var n=a(87462),r=(a(67294),a(3905));const l={title:"9/WAKU-RPC",name:"Waku RPC API",status:"stable",editor:"Andrea Maria Piana &lt;andreap@status.im&gt;",contributors:["Dean Eigenmann &lt;dean@status.im&gt;","Oskar Thor\xe9n &lt;oskarth@titanproxy.com&gt;"]},i=void 0,o={unversionedId:"standards/legacy/9/rpc",id:"standards/legacy/9/rpc",title:"9/WAKU-RPC",description:"- Status: stable",source:"@site/waku/standards/legacy/9/rpc.md",sourceDirName:"standards/legacy/9",slug:"/standards/legacy/9/rpc",permalink:"/waku/standards/legacy/9/rpc",draft:!1,tags:[],version:"current",frontMatter:{title:"9/WAKU-RPC",name:"Waku RPC API",status:"stable",editor:"Andrea Maria Piana &lt;andreap@status.im&gt;",contributors:["Dean Eigenmann &lt;dean@status.im&gt;","Oskar Thor\xe9n &lt;oskarth@titanproxy.com&gt;"]},sidebar:"defaultSidebar",previous:{title:"8/WAKU-MAIL",permalink:"/waku/standards/legacy/8/mail"}},s={},p=[{value:"Introduction",id:"introduction",level:2},{value:"Wire Protocol",id:"wire-protocol",level:2},{value:"Transport",id:"transport",level:3},{value:"Fields",id:"fields",level:4},{value:"Objects",id:"objects",level:3},{value:"Message",id:"message",level:4},{value:"Filter",id:"filter",level:4},{value:"Methods",id:"methods",level:3},{value:"<code>waku_version</code>",id:"waku_version",level:4},{value:"Parameters",id:"parameters",level:5},{value:"Response",id:"response",level:5},{value:"<code>waku_info</code>",id:"waku_info",level:4},{value:"<code>waku_setMaxEnvelopeSize</code>",id:"waku_setmaxenvelopesize",level:4},{value:"<code>waku_setMinPoW</code>",id:"waku_setminpow",level:4},{value:"<code>waku_markTrustedPeer</code>",id:"waku_marktrustedpeer",level:4},{value:"<code>waku_newKeyPair</code>",id:"waku_newkeypair",level:4},{value:"<code>waku_addPrivateKey</code>",id:"waku_addprivatekey",level:4},{value:"<code>waku_deleteKeyPair</code>",id:"waku_deletekeypair",level:4},{value:"<code>waku_hasKeyPair</code>",id:"waku_haskeypair",level:4},{value:"<code>waku_getPublicKey</code>",id:"waku_getpublickey",level:4},{value:"<code>waku_getPrivateKey</code>",id:"waku_getprivatekey",level:4},{value:"<code>waku_newSymKey</code>",id:"waku_newsymkey",level:4},{value:"<code>waku_addSymKey</code>",id:"waku_addsymkey",level:4},{value:"<code>waku_generateSymKeyFromPassword</code>",id:"waku_generatesymkeyfrompassword",level:4},{value:"<code>waku_hasSymKey</code>",id:"waku_hassymkey",level:4},{value:"<code>waku_getSymKey</code>",id:"waku_getsymkey",level:4},{value:"<code>waku_deleteSymKey</code>",id:"waku_deletesymkey",level:4},{value:"<code>waku_subscribe</code>",id:"waku_subscribe",level:4},{value:"<code>waku_unsubscribe</code>",id:"waku_unsubscribe",level:4},{value:"<code>waku_newMessageFilter</code>",id:"waku_newmessagefilter",level:4},{value:"<code>waku_deleteMessageFilter</code>",id:"waku_deletemessagefilter",level:4},{value:"<code>waku_getFilterMessages</code>",id:"waku_getfiltermessages",level:4},{value:"<code>waku_post</code>",id:"waku_post",level:4},{value:"Changelog",id:"changelog",level:2},{value:"Copyright",id:"copyright",level:2}],k={toc:p};function u(e){let{components:t,...a}=e;return(0,r.kt)("wrapper",(0,n.Z)({},k,a,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Status: stable"),(0,r.kt)("li",{parentName:"ul"},"Editor: Andrea Maria Piana ","<",(0,r.kt)("a",{parentName:"li",href:"mailto:andreap@status.im"},"andreap@status.im"),">"),(0,r.kt)("li",{parentName:"ul"},"Contributors:",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"Dean Eigenmann ","<",(0,r.kt)("a",{parentName:"li",href:"mailto:dean@status.im"},"dean@status.im"),">"),(0,r.kt)("li",{parentName:"ul"},"Oskar Thor\xe9n ","<",(0,r.kt)("a",{parentName:"li",href:"mailto:oskarth@titanproxy.com"},"oskarth@titanproxy.com"),">")))),(0,r.kt)("p",null,"This specification describes the RPC API that Waku nodes MAY adhere to.\nThe unified API allows clients to easily\nbe able to connect to any node implementation.\nThe API described is privileged as a node stores the keys of clients."),(0,r.kt)("h2",{id:"introduction"},"Introduction"),(0,r.kt)("p",null,"This API is based off the ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/ethereum/go-ethereum/wiki/Whisper-v6-RPC-API"},"Whisper V6 RPC API"),"."),(0,r.kt)("h2",{id:"wire-protocol"},"Wire Protocol"),(0,r.kt)("h3",{id:"transport"},"Transport"),(0,r.kt)("p",null,"Nodes SHOULD expose a ",(0,r.kt)("a",{parentName:"p",href:"https://www.jsonrpc.org/specification"},"JSON RPC")," API\nthat can be accessed.\nThe JSON RPC version SHOULD be ",(0,r.kt)("inlineCode",{parentName:"p"},"2.0"),".\nBelow is an example request:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "jsonrpc":"2.0",\n  "method":"waku_version",\n  "params":[],\n  "id":1\n}\n')),(0,r.kt)("h4",{id:"fields"},"Fields"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Field"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"jsonrpc")),(0,r.kt)("td",{parentName:"tr",align:null},"Contains the used JSON RPC version (",(0,r.kt)("inlineCode",{parentName:"td"},"Default: 2.0"),")")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"method")),(0,r.kt)("td",{parentName:"tr",align:null},"Contains the JSON RPC method that is being called")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"params")),(0,r.kt)("td",{parentName:"tr",align:null},"An array of parameters for the request")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"id")),(0,r.kt)("td",{parentName:"tr",align:null},"The request ID")))),(0,r.kt)("h3",{id:"objects"},"Objects"),(0,r.kt)("p",null,"In this section you will find objects used throughout the JSON RPC API."),(0,r.kt)("h4",{id:"message"},"Message"),(0,r.kt)("p",null,"The message object represents a Waku message.\nBelow you will find the description of the attributes contained in the message object.\nA message is the decrypted payload and\npadding of an ",(0,r.kt)("a",{parentName:"p",href:"../7/data"},"envelope")," along with all of its metadata and\nother extra information such as the hash."),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:"right"},"Field"),(0,r.kt)("th",{parentName:"tr",align:"center"},"Type"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"right"},(0,r.kt)("inlineCode",{parentName:"td"},"sig")),(0,r.kt)("td",{parentName:"tr",align:"center"},"string"),(0,r.kt)("td",{parentName:"tr",align:null},"Public Key that signed this message")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"right"},(0,r.kt)("inlineCode",{parentName:"td"},"recipientPublicKey")),(0,r.kt)("td",{parentName:"tr",align:"center"},"string"),(0,r.kt)("td",{parentName:"tr",align:null},"The recipients public key")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"right"},(0,r.kt)("inlineCode",{parentName:"td"},"ttl")),(0,r.kt)("td",{parentName:"tr",align:"center"},"number"),(0,r.kt)("td",{parentName:"tr",align:null},"Time-to-live in seconds")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"right"},(0,r.kt)("inlineCode",{parentName:"td"},"timestamp")),(0,r.kt)("td",{parentName:"tr",align:"center"},"number"),(0,r.kt)("td",{parentName:"tr",align:null},"Unix timestamp of the message generation")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"right"},(0,r.kt)("inlineCode",{parentName:"td"},"topic")),(0,r.kt)("td",{parentName:"tr",align:"center"},"string"),(0,r.kt)("td",{parentName:"tr",align:null},"4 bytes, the message topic")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"right"},(0,r.kt)("inlineCode",{parentName:"td"},"payload")),(0,r.kt)("td",{parentName:"tr",align:"center"},"string"),(0,r.kt)("td",{parentName:"tr",align:null},"Decrypted payload")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"right"},(0,r.kt)("inlineCode",{parentName:"td"},"padding")),(0,r.kt)("td",{parentName:"tr",align:"center"},"string"),(0,r.kt)("td",{parentName:"tr",align:null},"Optional padding, byte array of arbitrary length")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"right"},(0,r.kt)("inlineCode",{parentName:"td"},"pow")),(0,r.kt)("td",{parentName:"tr",align:"center"},"number"),(0,r.kt)("td",{parentName:"tr",align:null},"The proof of work value")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"right"},(0,r.kt)("inlineCode",{parentName:"td"},"hash")),(0,r.kt)("td",{parentName:"tr",align:"center"},"string"),(0,r.kt)("td",{parentName:"tr",align:null},"Hash of the enveloped message")))),(0,r.kt)("h4",{id:"filter"},"Filter"),(0,r.kt)("p",null,"The filter object represents filters that can be applied to retrieve messages.\nBelow you will find the description of the attributes contained in the filter object."),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:"right"},"Field"),(0,r.kt)("th",{parentName:"tr",align:"center"},"Type"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"right"},(0,r.kt)("inlineCode",{parentName:"td"},"symKeyID")),(0,r.kt)("td",{parentName:"tr",align:"center"},"string"),(0,r.kt)("td",{parentName:"tr",align:null},"ID of the symmetric key for message decryption")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"right"},(0,r.kt)("inlineCode",{parentName:"td"},"privateKeyID")),(0,r.kt)("td",{parentName:"tr",align:"center"},"string"),(0,r.kt)("td",{parentName:"tr",align:null},"ID of private (asymmetric) key for message decryption")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"right"},(0,r.kt)("inlineCode",{parentName:"td"},"sig")),(0,r.kt)("td",{parentName:"tr",align:"center"},"string"),(0,r.kt)("td",{parentName:"tr",align:null},"Public key of the signature")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"right"},(0,r.kt)("inlineCode",{parentName:"td"},"minPow")),(0,r.kt)("td",{parentName:"tr",align:"center"},"number"),(0,r.kt)("td",{parentName:"tr",align:null},"Minimal PoW requirement for incoming messages")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"right"},(0,r.kt)("inlineCode",{parentName:"td"},"topics")),(0,r.kt)("td",{parentName:"tr",align:"center"},"array"),(0,r.kt)("td",{parentName:"tr",align:null},"Array of possible topics, this can also contain partial topics")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"right"},(0,r.kt)("inlineCode",{parentName:"td"},"allowP2P")),(0,r.kt)("td",{parentName:"tr",align:"center"},"boolean"),(0,r.kt)("td",{parentName:"tr",align:null},"Indicates if this filter allows processing of direct peer-to-peer messages")))),(0,r.kt)("p",null,"All fields are optional, however ",(0,r.kt)("inlineCode",{parentName:"p"},"symKeyID")," or ",(0,r.kt)("inlineCode",{parentName:"p"},"privateKeyID")," must be present,\nit cannot be both.\nAdditionally, the ",(0,r.kt)("inlineCode",{parentName:"p"},"topics")," field is only optional when an asymmetric key is used."),(0,r.kt)("h3",{id:"methods"},"Methods"),(0,r.kt)("h4",{id:"waku_version"},(0,r.kt)("inlineCode",{parentName:"h4"},"waku_version")),(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},"waku_version")," method returns the current version number."),(0,r.kt)("h5",{id:"parameters"},"Parameters"),(0,r.kt)("p",null,"none"),(0,r.kt)("h5",{id:"response"},"Response"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"string")," - The version number.")),(0,r.kt)("h4",{id:"waku_info"},(0,r.kt)("inlineCode",{parentName:"h4"},"waku_info")),(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},"waku_info")," method returns information about a Waku node."),(0,r.kt)("p",null,"Parameters"),(0,r.kt)("p",null,"none"),(0,r.kt)("p",null,"Response"),(0,r.kt)("p",null,"The response is an ",(0,r.kt)("inlineCode",{parentName:"p"},"Object")," containing the following fields:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"strong"},"minPow")," ","[number]")," - The current PoW requirement."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"strong"},"maxEnvelopeSize")," ","[float]")," - The current maximum envelope size in bytes."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"strong"},"memory")," ","[number]")," - The memory size of the floating messages in bytes."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"strong"},"envelopes")," ","[number]")," - The number of floating envelopes.")),(0,r.kt)("h4",{id:"waku_setmaxenvelopesize"},(0,r.kt)("inlineCode",{parentName:"h4"},"waku_setMaxEnvelopeSize")),(0,r.kt)("p",null,"Sets the maximum envelope size allowed by this node.\nAny envelopes larger than this size both incoming and outgoing will be rejected.\nThe envelope size can never exceed the underlying envelope size of ",(0,r.kt)("inlineCode",{parentName:"p"},"10mb"),"."),(0,r.kt)("p",null,"Parameters"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"number")," - The message size in bytes.")),(0,r.kt)("p",null,"Response"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"bool")," -\n",(0,r.kt)("inlineCode",{parentName:"li"},"true")," on success or\nan ",(0,r.kt)("a",{parentName:"li",href:"https://www.jsonrpc.org/specification#error_object"},"error")," on failure.")),(0,r.kt)("h4",{id:"waku_setminpow"},(0,r.kt)("inlineCode",{parentName:"h4"},"waku_setMinPoW")),(0,r.kt)("p",null,"Sets the minimal PoW required by this node."),(0,r.kt)("p",null,"Parameters"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"number")," - The new PoW requirement.")),(0,r.kt)("p",null,"Response"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"bool")," -\n",(0,r.kt)("inlineCode",{parentName:"li"},"true")," on success or\nan ",(0,r.kt)("a",{parentName:"li",href:"https://www.jsonrpc.org/specification#error_object"},"error")," on failure.")),(0,r.kt)("h4",{id:"waku_marktrustedpeer"},(0,r.kt)("inlineCode",{parentName:"h4"},"waku_markTrustedPeer")),(0,r.kt)("p",null,"Marks a specific peer as trusted allowing it to send expired messages."),(0,r.kt)("p",null,"Parameters"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"string")," - ",(0,r.kt)("inlineCode",{parentName:"li"},"enode")," of the peer.")),(0,r.kt)("p",null,"Response"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"bool")," -\n",(0,r.kt)("inlineCode",{parentName:"li"},"true")," on success or\nan ",(0,r.kt)("a",{parentName:"li",href:"https://www.jsonrpc.org/specification#error_object"},"error")," on failure.")),(0,r.kt)("h4",{id:"waku_newkeypair"},(0,r.kt)("inlineCode",{parentName:"h4"},"waku_newKeyPair")),(0,r.kt)("p",null,"Generates a keypair used for message encryption and decryption."),(0,r.kt)("p",null,"Parameters"),(0,r.kt)("p",null,"none"),(0,r.kt)("p",null,"Response"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"string")," -\nKey ID on success or\nan ",(0,r.kt)("a",{parentName:"li",href:"https://www.jsonrpc.org/specification#error_object"},"error")," on failure.")),(0,r.kt)("h4",{id:"waku_addprivatekey"},(0,r.kt)("inlineCode",{parentName:"h4"},"waku_addPrivateKey")),(0,r.kt)("p",null,"Stores a key and returns its ID."),(0,r.kt)("p",null,"Parameters"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"string")," - Private key as hex bytes.")),(0,r.kt)("p",null,"Response"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"string")," - Key ID on success or\nan ",(0,r.kt)("a",{parentName:"li",href:"https://www.jsonrpc.org/specification#error_object"},"error")," on failure.")),(0,r.kt)("h4",{id:"waku_deletekeypair"},(0,r.kt)("inlineCode",{parentName:"h4"},"waku_deleteKeyPair")),(0,r.kt)("p",null,"Deletes a specific key if it exists."),(0,r.kt)("p",null,"Parameters"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"string")," - ID of the Key pair.")),(0,r.kt)("p",null,"Response"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"bool")," - ",(0,r.kt)("inlineCode",{parentName:"li"},"true")," on success or\nan ",(0,r.kt)("a",{parentName:"li",href:"https://www.jsonrpc.org/specification#error_object"},"error")," on failure.")),(0,r.kt)("h4",{id:"waku_haskeypair"},(0,r.kt)("inlineCode",{parentName:"h4"},"waku_hasKeyPair")),(0,r.kt)("p",null,"Checks if the node has a private key of a key pair matching the given ID."),(0,r.kt)("p",null,"Parameters"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"string")," - ID of the Key pair.")),(0,r.kt)("p",null,"Response"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"bool")," -\n",(0,r.kt)("inlineCode",{parentName:"li"},"true")," or\n",(0,r.kt)("inlineCode",{parentName:"li"},"false")," or an ",(0,r.kt)("a",{parentName:"li",href:"https://www.jsonrpc.org/specification#error_object"},"error")," on failure.")),(0,r.kt)("h4",{id:"waku_getpublickey"},(0,r.kt)("inlineCode",{parentName:"h4"},"waku_getPublicKey")),(0,r.kt)("p",null,"Returns the public key for an ID."),(0,r.kt)("p",null,"Parameters"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"string")," - ID of the Key.")),(0,r.kt)("p",null,"Response"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"string")," - The public key or\nan ",(0,r.kt)("a",{parentName:"li",href:"https://www.jsonrpc.org/specification#error_object"},"error")," on failure.")),(0,r.kt)("h4",{id:"waku_getprivatekey"},(0,r.kt)("inlineCode",{parentName:"h4"},"waku_getPrivateKey")),(0,r.kt)("p",null,"Returns the private key for an ID."),(0,r.kt)("p",null,"Parameters"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"string")," - ID of the Key.")),(0,r.kt)("p",null,"Response"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"string")," - The private key or\nan ",(0,r.kt)("a",{parentName:"li",href:"https://www.jsonrpc.org/specification#error_object"},"error")," on failure.")),(0,r.kt)("h4",{id:"waku_newsymkey"},(0,r.kt)("inlineCode",{parentName:"h4"},"waku_newSymKey")),(0,r.kt)("p",null,"Generates a random symmetric key and stores it under an ID.\nThis key can be used to encrypt and\ndecrypt messages where the key is known to both parties."),(0,r.kt)("p",null,"Parameters"),(0,r.kt)("p",null,"none"),(0,r.kt)("p",null,"Response"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"string")," - The key ID or\nan ",(0,r.kt)("a",{parentName:"li",href:"https://www.jsonrpc.org/specification#error_object"},"error")," on failure.")),(0,r.kt)("h4",{id:"waku_addsymkey"},(0,r.kt)("inlineCode",{parentName:"h4"},"waku_addSymKey")),(0,r.kt)("p",null,"Stores the key and returns its ID."),(0,r.kt)("p",null,"Parameters"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"string")," - The raw key for symmetric encryption hex encoded.")),(0,r.kt)("p",null,"Response"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"string")," - The key ID or\nan ",(0,r.kt)("a",{parentName:"li",href:"https://www.jsonrpc.org/specification#error_object"},"error")," on failure.")),(0,r.kt)("h4",{id:"waku_generatesymkeyfrompassword"},(0,r.kt)("inlineCode",{parentName:"h4"},"waku_generateSymKeyFromPassword")),(0,r.kt)("p",null,"Generates the key from a password and stores it."),(0,r.kt)("p",null,"Parameters"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"string")," - The password.")),(0,r.kt)("p",null,"Response"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"string")," - The key ID or an ",(0,r.kt)("a",{parentName:"li",href:"https://www.jsonrpc.org/specification#error_object"},"error"),"\non failure.")),(0,r.kt)("h4",{id:"waku_hassymkey"},(0,r.kt)("inlineCode",{parentName:"h4"},"waku_hasSymKey")),(0,r.kt)("p",null,"Returns whether there is a key associated with the ID."),(0,r.kt)("p",null,"Parameters"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"string")," - ID of the Key.")),(0,r.kt)("p",null,"Response"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"bool")," - ",(0,r.kt)("inlineCode",{parentName:"li"},"true")," or ",(0,r.kt)("inlineCode",{parentName:"li"},"false")," or an ",(0,r.kt)("a",{parentName:"li",href:"https://www.jsonrpc.org/specification#error_object"},"error"),"\non failure.")),(0,r.kt)("h4",{id:"waku_getsymkey"},(0,r.kt)("inlineCode",{parentName:"h4"},"waku_getSymKey")),(0,r.kt)("p",null,"Returns the symmetric key associated with an ID."),(0,r.kt)("p",null,"Parameters"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"string")," - ID of the Key.")),(0,r.kt)("p",null,"Response"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"string")," - Raw key on success or\nan ",(0,r.kt)("a",{parentName:"li",href:"https://www.jsonrpc.org/specification#error_object"},"error")," of failure.")),(0,r.kt)("h4",{id:"waku_deletesymkey"},(0,r.kt)("inlineCode",{parentName:"h4"},"waku_deleteSymKey")),(0,r.kt)("p",null,"Deletes the key associated with an ID."),(0,r.kt)("p",null,"Parameters"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"string")," - ID of the Key.")),(0,r.kt)("p",null,"Response"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"bool")," -\n",(0,r.kt)("inlineCode",{parentName:"li"},"true")," or ",(0,r.kt)("inlineCode",{parentName:"li"},"false")," or\nan ",(0,r.kt)("a",{parentName:"li",href:"https://www.jsonrpc.org/specification#error_object"},"error")," on failure.")),(0,r.kt)("h4",{id:"waku_subscribe"},(0,r.kt)("inlineCode",{parentName:"h4"},"waku_subscribe")),(0,r.kt)("p",null,"Creates and\nregisters a new subscription to receive notifications for inbound Waku messages."),(0,r.kt)("p",null,"Parameters"),(0,r.kt)("p",null,"The parameters for this request is an array containing the following fields:"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("strong",{parentName:"li"},"string"),' - The ID of the function call,\nin case of Waku this must contain the value "messages".'),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("strong",{parentName:"li"},"object")," - The ",(0,r.kt)("a",{parentName:"li",href:"#filter"},"message filter"),".")),(0,r.kt)("p",null,"Response"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"string")," - ID of the subscription or\nan ",(0,r.kt)("a",{parentName:"li",href:"https://www.jsonrpc.org/specification#error_object"},"error")," on failure.")),(0,r.kt)("p",null,"Notifications"),(0,r.kt)("p",null,"Notifications received by the client contain a ",(0,r.kt)("a",{parentName:"p",href:"#message"},"message")," matching the filter.\nBelow is an example notification:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "jsonrpc": "2.0",\n  "method": "waku_subscription",\n  "params": {\n    "subscription": "02c1f5c953804acee3b68eda6c0afe3f1b4e0bec73c7445e10d45da333616412",\n    "result": {\n      "sig": "0x0498ac1951b9078a0549c93c3f6088ec7c790032b17580dc3c0c9e900899a48d89eaa27471e3071d2de6a1f48716ecad8b88ee022f4321a7c29b6ffcbee65624ff",\n      "recipientPublicKey": null,\n      "ttl": 10,\n      "timestamp": 1498577270,\n      "topic": "0xffaadd11",\n      "payload": "0xffffffdddddd1122",\n      "padding": "0x35d017b66b124dd4c67623ed0e3f23ba68e3428aa500f77aceb0dbf4b63f69ccfc7ae11e39671d7c94f1ed170193aa3e327158dffdd7abb888b3a3cc48f718773dc0a9dcf1a3680d00fe17ecd4e8d5db31eb9a3c8e6e329d181ecb6ab29eb7a2d9889b49201d9923e6fd99f03807b730780a58924870f541a8a97c87533b1362646e5f573dc48382ef1e70fa19788613c9d2334df3b613f6e024cd7aadc67f681fda6b7a84efdea40cb907371cd3735f9326d02854",\n      "pow": 0.6714754098360656,\n      "hash": "0x17f8066f0540210cf67ef400a8a55bcb32a494a47f91a0d26611c5c1d66f8c57"\n    }\n  }\n}\n')),(0,r.kt)("h4",{id:"waku_unsubscribe"},(0,r.kt)("inlineCode",{parentName:"h4"},"waku_unsubscribe")),(0,r.kt)("p",null,"Cancels and removes an existing subscription.\nThe node MUST stop sending the client notifications."),(0,r.kt)("p",null,"Parameters"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"string")," - The subscription ID.")),(0,r.kt)("p",null,"Response"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"bool")," - ",(0,r.kt)("inlineCode",{parentName:"li"},"true")," or ",(0,r.kt)("inlineCode",{parentName:"li"},"false"))),(0,r.kt)("h4",{id:"waku_newmessagefilter"},(0,r.kt)("inlineCode",{parentName:"h4"},"waku_newMessageFilter")),(0,r.kt)("p",null,"Creates a new message filter within the node.\nThis filter can be used to poll for new messages that match the criteria."),(0,r.kt)("p",null,"Parameters"),(0,r.kt)("p",null,"The request must contain a ",(0,r.kt)("a",{parentName:"p",href:"#filter"},"message filter")," as its parameter."),(0,r.kt)("p",null,"Response"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"string")," - The ID of the filter.")),(0,r.kt)("h4",{id:"waku_deletemessagefilter"},(0,r.kt)("inlineCode",{parentName:"h4"},"waku_deleteMessageFilter")),(0,r.kt)("p",null,"Removes a message filter from the node."),(0,r.kt)("p",null,"Parameters"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"string")," - ID of the filter created with ",(0,r.kt)("a",{parentName:"li",href:"#waku_newmessagefilter"},(0,r.kt)("inlineCode",{parentName:"a"},"waku_newMessageFilter")),".")),(0,r.kt)("p",null,"Response"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"bool")," - ",(0,r.kt)("inlineCode",{parentName:"li"},"true")," on success or\nan ",(0,r.kt)("a",{parentName:"li",href:"https://www.jsonrpc.org/specification#error_object"},"error")," on failure.")),(0,r.kt)("h4",{id:"waku_getfiltermessages"},(0,r.kt)("inlineCode",{parentName:"h4"},"waku_getFilterMessages")),(0,r.kt)("p",null,"Retrieves messages that match a filter criteria and\nwere received after the last time this function was called."),(0,r.kt)("p",null,"Parameters"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"string")," - ID of the filter created with ",(0,r.kt)("a",{parentName:"li",href:"#waku_newmessagefilter"},(0,r.kt)("inlineCode",{parentName:"a"},"waku_newMessageFilter")),".")),(0,r.kt)("p",null,"Response"),(0,r.kt)("p",null,"The response contains an array of ",(0,r.kt)("a",{parentName:"p",href:"#message"},"messages")," or\nan ",(0,r.kt)("a",{parentName:"p",href:"https://www.jsonrpc.org/specification#error_object"},"error")," on failure."),(0,r.kt)("h4",{id:"waku_post"},(0,r.kt)("inlineCode",{parentName:"h4"},"waku_post")),(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},"waku_post")," method creates a waku envelope and propagates it to the network."),(0,r.kt)("p",null,"Parameters"),(0,r.kt)("p",null,"The parameters is an ",(0,r.kt)("inlineCode",{parentName:"p"},"Object")," containing the following fields:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"strong"},"symKeyID")," ","[string]")," ",(0,r.kt)("inlineCode",{parentName:"li"},"optional")," - The ID of the symmetric key used for encryption"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"strong"},"pubKey")," ","[string]")," ",(0,r.kt)("inlineCode",{parentName:"li"},"optional")," - The public key for message encryption."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"strong"},"sig")," ","[string]")," ",(0,r.kt)("inlineCode",{parentName:"li"},"optional")," - The ID of the signing key."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"strong"},"ttl")," ","[number]")," - The time-to-live in seconds."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"strong"},"topic")," ","[string]")," - 4 bytes message topic."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"strong"},"payload")," ","[string]")," - The payload to be encrypted."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"strong"},"padding")," ","[string]")," ",(0,r.kt)("inlineCode",{parentName:"li"},"optional")," - The padding, a byte array of arbitrary length."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"strong"},"powTime")," ","[number]")," - Maximum time in seconds to be spent on the proof of work."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"strong"},"powTarget")," ","[number]")," - Minimal PoW target required for this message."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"strong"},"targetPeer")," ","[string]")," ",(0,r.kt)("inlineCode",{parentName:"li"},"optional")," - The optional peer ID for peer-to-peer messages.")),(0,r.kt)("p",null,(0,r.kt)("em",{parentName:"p"},"Either the ",(0,r.kt)("strong",{parentName:"em"},(0,r.kt)("inlineCode",{parentName:"strong"},"symKeyID"))," or the ",(0,r.kt)("strong",{parentName:"em"},(0,r.kt)("inlineCode",{parentName:"strong"},"pubKey"))," need to be present.\nIt can not be both.")),(0,r.kt)("p",null,"Response"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"bool")," -\n",(0,r.kt)("inlineCode",{parentName:"li"},"true")," on success or\nan ",(0,r.kt)("a",{parentName:"li",href:"https://www.jsonrpc.org/specification#error_object"},"error")," on failure.")),(0,r.kt)("h2",{id:"changelog"},"Changelog"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:"center"},"Version"),(0,r.kt)("th",{parentName:"tr",align:null},"Comment"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"center"},(0,r.kt)("a",{parentName:"td",href:"https://github.com/vacp2p/specs/commit/bc7e75ebb2e45d2cbf6ab27352c113e666df37c8"},"1.0.0")),(0,r.kt)("td",{parentName:"tr",align:null},"Initial release.")))),(0,r.kt)("h2",{id:"copyright"},"Copyright"),(0,r.kt)("p",null,"Copyright and related rights waived via ",(0,r.kt)("a",{parentName:"p",href:"https://creativecommons.org/publicdomain/zero/1.0/"},"CC0"),"."))}u.isMDXComponent=!0},3905:(e,t,a)=>{a.d(t,{Zo:()=>k,kt:()=>d});var n=a(67294);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function l(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function i(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?l(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):l(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function o(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},l=Object.keys(e);for(n=0;n<l.length;n++)a=l[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)a=l[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var s=n.createContext({}),p=function(e){var t=n.useContext(s),a=t;return e&&(a="function"==typeof e?e(t):i(i({},t),e)),a},k=function(e){var t=p(e.components);return n.createElement(s.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},m=n.forwardRef((function(e,t){var a=e.components,r=e.mdxType,l=e.originalType,s=e.parentName,k=o(e,["components","mdxType","originalType","parentName"]),m=p(a),d=r,c=m["".concat(s,".").concat(d)]||m[d]||u[d]||l;return a?n.createElement(c,i(i({ref:t},k),{},{components:a})):n.createElement(c,i({ref:t},k))}));function d(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var l=a.length,i=new Array(l);i[0]=m;var o={};for(var s in t)hasOwnProperty.call(t,s)&&(o[s]=t[s]);o.originalType=e,o.mdxType="string"==typeof e?e:r,i[1]=o;for(var p=2;p<l;p++)i[p]=a[p];return n.createElement.apply(null,i)}return n.createElement.apply(null,a)}m.displayName="MDXCreateElement"}}]);